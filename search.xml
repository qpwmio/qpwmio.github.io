<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hexo优化-Fancybox图片跳转问题</title>
    <url>/2021/04/01/Hexo%E4%BC%98%E5%8C%96-Fancybox%E5%9B%BE%E7%89%87%E8%B7%B3%E8%BD%AC%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<table><tr><td bgcolor=#D1EEEE>#导语</td></tr></table>

<span id="more"></span>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote>
<p>  前段时间总结了博客使用图床解决了存储图片的问题，实现了博客的全面瘦身。<br>  然而在使用的过程中发现，fancybox 的图片浏览功能与图传链接产生了冲突，出现了意想不到的 BUG。<br>  主要原因是 fancybox 是使用 a 标签的 href 属性进行跳转的，之前链接图片都是本地链接，href 并没有跳转新的网页，然而用了图床的链接之后，a 标签就直接跳转到了图片地址去了。</p>
</blockquote>
<h2 id="解决尝试"><a href="#解决尝试" class="headerlink" title="解决尝试"></a>解决尝试</h2><blockquote>
<p>  fancybox 的使用方法并没有研究过，我首先想到是的将 href 属性名称改变，比如改为 hrefs。不过首先得找到 a 标签的生成位置。<br>  我通过 VScode 搜索 black-blue 主题的 fancy 相关的脚本，经过筛选，找到 main.js 的压缩中有 a 标签的生成代码。</p>
</blockquote>
<p><a href="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/39119/1.png"><img src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/39119/1.png" alt="操作截图"></a></p>
<hr>
<blockquote>
<p>  将 href 属性修改为无关的 hrefs 属性之后，虽然可以实现弹窗，但是每次弹窗之后图片就被吞了。</p>
</blockquote>
<p><a href="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/39119/2.png"><img src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/39119/2.png" alt="操作截图"></a><br><a href="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/39119/3.png"><img src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/39119/3.png" alt="操作截图"></a></p>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><blockquote>
<p>  后面上网找到了<a href="https://stackoverflow.com/questions/11618221/how-do-i-make-fancybox-href-dynamic">解决方案</a><br>  第一个解答有提到可以将 href 修改为 data-fancybox-href 进行调用，我完全按照回答的方法进行修改。</p>
</blockquote>
<p><a href="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/39119/4.png"><img src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/39119/4.png" alt="操作截图"></a><br><a href="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/39119/5.png"><img src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/39119/5.png" alt="操作截图"></a></p>
<hr>
<blockquote>
<p>  经过测试之后，我发现根源是 type: ‘iframe’ 这段代码上，但是去掉之后又点击图片就没有反应了。<br>  后面我上官网查了 type 可以填写的参数，填上’image’之后，完美解决了问题。</p>
</blockquote>
<p><a href="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/39119/6.png"><img src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/39119/6.png" alt="操作截图"></a><br><a href="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/39119/7.png"><img src="https://cdn.jsdelivr.net/gh/FXTD-odyssey/FXTD-odyssey.github.io@master/post_img/39119/7.png" alt="操作截图"></a></p>
]]></content>
      <categories>
        <category>Hexo</category>
        <category>Configuration</category>
      </categories>
      <tags>
        <tag>博客优化</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdown学习笔记</title>
    <url>/2021/02/22/Markdown%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<p>@(网页基础设计)[马克飞象, 帮助, Markdown]</p>
<span id="more"></span>
<h1 id="欢迎使用MarkDown"><a href="#欢迎使用MarkDown" class="headerlink" title="欢迎使用MarkDown"></a>欢迎使用MarkDown</h1><p><strong>马克飞象</strong>是一款专为印象笔记（Evernote）打造的Markdown编辑器，通过精心的设计与技术实现，配合印象笔记强大的存储和同步功能，带来前所未有的书写体验。特点概述：</p>
<ul>
<li><strong>功能丰富</strong> ：支持高亮代码块、<em>LaTeX</em> 公式、流程图，本地图片以及附件上传，甚至截图粘贴，工作学习好帮手；</li>
<li><strong>得心应手</strong> ：简洁高效的编辑器，提供<a href="http://maxiang.info/client_zh">桌面客户端</a>以及<a href="https://chrome.google.com/webstore/detail/kidnkfckhbdkfgbicccmdggmpgogehop">离线Chrome App</a>，支持移动端 Web；</li>
<li><strong>深度整合</strong> ：支持选择笔记本和添加标签，支持从印象笔记跳转编辑，轻松管理。</li>
</ul>
<hr>
<p>[TOC]</p>
<h2 id="Markdown简介"><a href="#Markdown简介" class="headerlink" title="Markdown简介"></a>Markdown简介</h2><blockquote>
<p>Markdown 是一种轻量级标记语言，它允许人们使用易读易写的纯文本格式编写文档，然后转换成格式丰富的HTML页面。    —— <a href="https://zh.wikipedia.org/wiki/Markdown">维基百科</a></p>
</blockquote>
<p>正如您在阅读的这份文档，它使用简单的符号标识不同的标题，将某些文字标记为<strong>粗体</strong>或者<em>斜体</em>，创建一个<a href="http://www.example.com/">链接</a>或一个脚注[^demo]。下面列举了几个高级功能，更多语法请按<code>Ctrl + /</code>查看帮助。 </p>
<h3 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@requires_authorization</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">somefunc</span>(<span class="params">param1=<span class="string">&#x27;&#x27;</span>, param2=<span class="number">0</span></span>):</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;A docstring&#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> param1 &gt; param2: <span class="comment"># interesting</span></span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;Greater&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> (param2 - param1 + <span class="number">1</span>) <span class="keyword">or</span> <span class="literal">None</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>message = <span class="string">&#x27;&#x27;&#x27;interpreter</span></span><br><span class="line"><span class="string"><span class="meta">... </span>prompt&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="LaTeX-公式"><a href="#LaTeX-公式" class="headerlink" title="LaTeX 公式"></a>LaTeX 公式</h3><p>可以创建行内公式，例如 $\Gamma(n) = (n-1)!\quad\forall n\in\mathbb N$。或者块级公式：</p>
<p>$$    x = \dfrac{-b \pm \sqrt{b^2 - 4ac}}{2a} $$</p>
<h3 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h3><table>
<thead>
<tr>
<th align="left">Item</th>
<th align="right">Value</th>
<th align="center">Qty</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Computer</td>
<td align="right">1600 USD</td>
<td align="center">5</td>
</tr>
<tr>
<td align="left">Phone</td>
<td align="right">12 USD</td>
<td align="center">12</td>
</tr>
<tr>
<td align="left">Pipe</td>
<td align="right">1 USD</td>
<td align="center">234</td>
</tr>
</tbody></table>
<h3 id="流程图"><a href="#流程图" class="headerlink" title="流程图"></a>流程图</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">st&#x3D;&gt;start: Start</span><br><span class="line">e&#x3D;&gt;end</span><br><span class="line">op&#x3D;&gt;operation: My Operation</span><br><span class="line">cond&#x3D;&gt;condition: Yes or No?</span><br><span class="line"></span><br><span class="line">st-&gt;op-&gt;cond</span><br><span class="line">cond(yes)-&gt;e</span><br><span class="line">cond(no)-&gt;op</span><br></pre></td></tr></table></figure>

<p>以及时序图:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Alice-&gt;Bob: Hello Bob, how are you?</span><br><span class="line">Note right of Bob: Bob thinks</span><br><span class="line">Bob--&gt;Alice: I am good than**![enter image description here](!%5BAlt%20text%5D%28.&#x2F;1612961876931.png%29)**ks!</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>提示：</strong>想了解更多，请查看<strong>流程图</strong><a href="http://adrai.github.io/flowchart.js/">语法</a>以及<strong>时序图</strong><a href="http://bramp.github.io/js-sequence-diagrams/">语法</a>。</p>
</blockquote>
<h3 id="复选框"><a href="#复选框" class="headerlink" title="复选框"></a>复选框</h3><p>使用 <code>- [ ]</code> 和 <code>- [x]</code> 语法可以创建复选框，实现 todo-list 等功能。例如：</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> 已完成事项</li>
<li><input disabled="" type="checkbox"> 待办事项1</li>
<li><input disabled="" type="checkbox"> 待办事项2</li>
</ul>
<blockquote>
<p><strong>注意：</strong>目前支持尚不完全，在印象笔记中勾选复选框是无效、不能同步的，所以必须在<strong>马克飞象</strong>中修改 Markdown 原文才可生效。下个版本将会全面支持。</p>
</blockquote>
<h2 id="印象笔记相关"><a href="#印象笔记相关" class="headerlink" title="印象笔记相关"></a>印象笔记相关</h2><h3 id="笔记本和标签"><a href="#笔记本和标签" class="headerlink" title="笔记本和标签"></a>笔记本和标签</h3><p><strong>马克飞象</strong>增加了<code>@(笔记本)[标签A|标签B]</code>语法, 以选择笔记本和添加标签。 <strong>绑定账号后</strong>， 输入<code>(</code>自动会出现笔记本列表，请从中选择。</p>
<h3 id="笔记标题"><a href="#笔记标题" class="headerlink" title="笔记标题"></a>笔记标题</h3><p><strong>马克飞象</strong>会自动使用文档内出现的第一个标题作为笔记标题。例如本文，就是第一行的 <code>欢迎使用马克飞象</code>。</p>
<h3 id="快捷编辑"><a href="#快捷编辑" class="headerlink" title="快捷编辑"></a>快捷编辑</h3><p>保存在印象笔记中的笔记，右上角会有一个红色的编辑按钮，点击后会回到<strong>马克飞象</strong>中打开并编辑该笔记。</p>
<blockquote>
<p><strong>注意：</strong>目前用户在印象笔记中单方面做的任何修改，马克飞象是无法自动感知和更新的。所以请务必回到马克飞象编辑。</p>
</blockquote>
<h3 id="数据同步"><a href="#数据同步" class="headerlink" title="数据同步"></a>数据同步</h3><p><strong>马克飞象</strong>通过<strong>将Markdown原文以隐藏内容保存在笔记中</strong>的精妙设计，实现了对Markdown的存储和再次编辑。既解决了其他产品只是单向导出HTML的单薄，又规避了服务端存储Markdown带来的隐私安全问题。这样，服务端仅作为对印象笔记 API调用和数据转换之用。</p>
<blockquote>
<p><strong>隐私声明：用户所有的笔记数据，均保存在印象笔记中。马克飞象不存储用户的任何笔记数据。</strong></p>
</blockquote>
<h3 id="离线存储"><a href="#离线存储" class="headerlink" title="离线存储"></a>离线存储</h3><p><strong>马克飞象</strong>使用浏览器离线存储将内容实时保存在本地，不必担心网络断掉或浏览器崩溃。为了节省空间和避免冲突，已同步至印象笔记并且不再修改的笔记将删除部分本地缓存，不过依然可以随时通过<code>文档管理</code>打开。</p>
<blockquote>
<p><strong>注意：</strong>虽然浏览器存储大部分时候都比较可靠，但印象笔记作为专业云存储，更值得信赖。以防万一，<strong>请务必经常及时同步到印象笔记</strong>。</p>
</blockquote>
<h2 id="编辑器相关"><a href="#编辑器相关" class="headerlink" title="编辑器相关"></a>编辑器相关</h2><h3 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h3><p>右侧系统菜单（快捷键<code>Ctrl + M</code>）的<code>设置</code>中，提供了界面字体、字号、自定义CSS、vim/emacs 键盘模式等高级选项。</p>
<h3 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h3><p>帮助    <code>Ctrl + /</code><br>同步文档    <code>Ctrl + S</code><br>创建文档    <code>Ctrl + Alt + N</code><br>最大化编辑器    <code>Ctrl + Enter</code><br>预览文档 <code>Ctrl + Alt + Enter</code><br>文档管理    <code>Ctrl + O</code><br>系统菜单    <code>Ctrl + M</code> </p>
<p>加粗    <code>Ctrl + B</code><br>插入图片    <code>Ctrl + G</code><br>插入链接    <code>Ctrl + L</code><br>提升标题    <code>Ctrl + H</code></p>
<h2 id="关于收费"><a href="#关于收费" class="headerlink" title="关于收费"></a>关于收费</h2><p><strong>马克飞象</strong>为新用户提供 10 天的试用期，试用期过后需要<a href="maxiang.info/vip.html">续费</a>才能继续使用。未购买或者未及时续费，将不能同步新的笔记。之前保存过的笔记依然可以编辑。</p>
<h2 id="反馈与建议"><a href="#反馈与建议" class="headerlink" title="反馈与建议"></a>反馈与建议</h2><ul>
<li>微博：<a href="http://weibo.com/u/2788354117">@马克飞象</a>，<a href="http://weibo.com/ggock" title="开发者个人账号">@GGock</a></li>
<li>邮箱：<a href="mailto:&#104;&#x75;&#115;&#116;&#103;&#111;&#99;&#x6b;&#x40;&#x67;&#109;&#x61;&#105;&#x6c;&#46;&#99;&#x6f;&#x6d;">&#104;&#x75;&#115;&#116;&#103;&#111;&#99;&#x6b;&#x40;&#x67;&#109;&#x61;&#105;&#x6c;&#46;&#99;&#x6f;&#x6d;</a></li>
</ul>
<hr>
<p>感谢阅读这份帮助文档。请点击右上角，绑定印象笔记账号，开启全新的记录与分享体验吧。</p>
<p>[^demo]: 这是一个示例脚注。请查阅 <a href="https://github.com/fletcher/MultiMarkdown/wiki/MultiMarkdown-Syntax-Guide#footnotes">MultiMarkdown 文档</a> 关于脚注的说明。 <strong>限制：</strong> 印象笔记的笔记内容使用 <a href="https://dev.yinxiang.com/doc/articles/enml.php">ENML</a> 格式，基于 HTML，但是不支持某些标签和属性，例如id，这就导致<code>脚注</code>和<code>TOC</code>无法正常点击。</p>
]]></content>
      <categories>
        <category>Hexo</category>
        <category>MarkdownConfig</category>
      </categories>
      <tags>
        <tag>markdown，post</tag>
      </tags>
  </entry>
  <entry>
    <title>PicGo + Gitee实现图床</title>
    <url>/2021/04/01/PicGo%20+%20Gitee(%E7%A0%81%E4%BA%91)%E5%AE%9E%E7%8E%B0%E5%9B%BE%E5%BA%8A/</url>
    <content><![CDATA[<p><strong>前言</strong>：深感在线博客的编辑器坑太多了，文档丢失、必须联网、可移植性太差，所以开始寻找可替代的方案。</p>
<span id="more"></span>

<h5 id="markdown是一门易于上手能帮助作者专心写作的文档编辑语言，它的好处太多了，建议想自己动手做笔记写博客的朋友都可以学一学，10分钟上手（我昨天晚上还不会用，今天就开始用它写博客了。。足以证明它是真的很简单）"><a href="#markdown是一门易于上手能帮助作者专心写作的文档编辑语言，它的好处太多了，建议想自己动手做笔记写博客的朋友都可以学一学，10分钟上手（我昨天晚上还不会用，今天就开始用它写博客了。。足以证明它是真的很简单）" class="headerlink" title="markdown是一门易于上手能帮助作者专心写作的文档编辑语言，它的好处太多了，建议想自己动手做笔记写博客的朋友都可以学一学，10分钟上手（我昨天晚上还不会用，今天就开始用它写博客了。。足以证明它是真的很简单）"></a><a href="https://baike.baidu.com/item/markdown/3245829?fr=aladdin">markdown</a>是一门易于上手能帮助作者专心写作的文档编辑语言，它的好处太多了，建议想自己动手做笔记写博客的朋友都可以学一学，10分钟上手（我昨天晚上还不会用，今天就开始用它写博客了。。足以证明它是真的很简单）</h5><h5 id="Tpyora是一款优雅的markdown编辑器，也推荐给大家，至于安装和配置，比安装word还简单，就不赘述了"><a href="#Tpyora是一款优雅的markdown编辑器，也推荐给大家，至于安装和配置，比安装word还简单，就不赘述了" class="headerlink" title="Tpyora是一款优雅的markdown编辑器，也推荐给大家，至于安装和配置，比安装word还简单，就不赘述了"></a><a href="https://www.typora.io/">Tpyora</a>是一款优雅的markdown编辑器，也推荐给大家，至于安装和配置，比安装word还简单，就不赘述了</h5><p>但是，这都不是重点，重点是咱们写博客的时候，总是需要<strong>插入图片</strong>的，图片存在本地的话上传到博客网站去就没法显示了，就算一个图一个图的复制粘贴上去，想移植到其他的博客网站，图就会失效，我们就需要图床</p>
<blockquote>
<p>图床是干什么的？  </p>
<p>图床就是一个便于在博文中插入在线图片连接的个人图片仓库。设置图床之后，在自己博客中插入的图片链接就可以随时随地在线预览了，并且不会因为任何意外原因无法查看，除非自己亲自删除。</p>
</blockquote>
<h5 id="神奇的PicGo就是为了解决这个问题诞生的，它可以将图片上传到指定的图床上，然后返回markdown链接，直接粘贴到你的文档中，就搞定啦"><a href="#神奇的PicGo就是为了解决这个问题诞生的，它可以将图片上传到指定的图床上，然后返回markdown链接，直接粘贴到你的文档中，就搞定啦" class="headerlink" title="神奇的PicGo就是为了解决这个问题诞生的，它可以将图片上传到指定的图床上，然后返回markdown链接，直接粘贴到你的文档中，就搞定啦"></a>神奇的PicGo就是为了解决这个问题诞生的，它可以将图片上传到指定的图床上，然后返回markdown链接，直接粘贴到你的文档中，就搞定啦</h5><p>问题又来了，网上推荐七牛云阿里云都是要租赁服务器的，太麻烦还要钱，微博现在挂链接又很厉害。大部分人选择用github，但是github虽好却是国外的网站，速度终究比不上国内网站，研究了小半天，终于发现完美的解决方案</p>
<h2 id="最终决定使用PicGo-国内的github-码云来实现markdown图床"><a href="#最终决定使用PicGo-国内的github-码云来实现markdown图床" class="headerlink" title="最终决定使用PicGo + 国内的github - 码云来实现markdown图床"></a>最终决定使用PicGo + 国内的github - <a href="https://gitee/com">码云</a>来实现markdown图床</h2><p>废话说到这里，开始进入正题</p>
<hr>
<h2 id="1-安装"><a href="#1-安装" class="headerlink" title="1. 安装"></a>1. 安装</h2><ul>
<li>  PicGo</li>
<li>  picgo-plugin-gitee-uploader插件</li>
</ul>
<h4 id="首先打开picgo官网，下载安装包"><a href="#首先打开picgo官网，下载安装包" class="headerlink" title="首先打开picgo官网，下载安装包"></a>首先打开<a href="https://github.com/Molunerfinn/PicGo">picgo官网</a>，下载安装包</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDExMzE1NTIyMC5wbmc?x-oss-process=image/format,png"><br>速度还挺快，没关系，PicGo2.1.2的安装包下面链接自取</p>
<h4 id="安装之后打开主界面"><a href="#安装之后打开主界面" class="headerlink" title="安装之后打开主界面"></a>安装之后打开主界面</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0d1aS1JTExML0Jsb2dJbWFnZS9tYXN0ZXIvaW1nLzIwMjAwMTEzMTY1NjE4LnBuZw?x-oss-process=image/format,png"></p>
<h4 id="选择最底下的插件设置，搜索gitee"><a href="#选择最底下的插件设置，搜索gitee" class="headerlink" title="选择最底下的插件设置，搜索gitee"></a>选择最底下的插件设置，搜索<strong>gitee</strong></h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDExMzE2NTU1OC5wbmc?x-oss-process=image/format,png"></p>
<h4 id="点击右边的gitee-uploader-1-1-2开始安装"><a href="#点击右边的gitee-uploader-1-1-2开始安装" class="headerlink" title="点击右边的gitee-uploader 1.1.2开始安装"></a>点击右边的gitee-uploader 1.1.2开始安装</h4><blockquote>
<p>这里注意一下，必须要先安装<a href="https://nodejs.org/en/">node.js</a>才能安装插件，没装的自己装一下，然后重启就行。</p>
</blockquote>
<p>这个地方有两个插件，我试了一遍，两个都能用，大家看心情选择，先说一下右边这个<strong>gitee-uploader 1.1.2</strong>，用不了的同学就选左边那个，我都会讲一遍配置</p>
<hr>
<h2 id="2-建立gitee（码云）图床库"><a href="#2-建立gitee（码云）图床库" class="headerlink" title="2. 建立gitee（码云）图床库"></a>2. 建立gitee（码云）图床库</h2><p>注册码云的方法很简单，网站引导都是中文，不多说了，我们直接建立自己的图床库。</p>
<h4 id="点击右上角的-号，新建仓库"><a href="#点击右上角的-号，新建仓库" class="headerlink" title="点击右上角的+号，新建仓库"></a>点击右上角的+号，新建仓库</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDExMzE2NTUyNy5wbmc?x-oss-process=image/format,png"></p>
<p>新建仓库的要点如下：</p>
<ol>
<li><h5 id="输入一个仓库名称"><a href="#输入一个仓库名称" class="headerlink" title="输入一个仓库名称"></a>输入一个仓库名称</h5></li>
<li><h5 id="其次将仓库设为公开"><a href="#其次将仓库设为公开" class="headerlink" title="其次将仓库设为公开"></a>其次将仓库设为公开</h5></li>
<li><h5 id="勾选使用Readme文件初始化这个仓库"><a href="#勾选使用Readme文件初始化这个仓库" class="headerlink" title="勾选使用Readme文件初始化这个仓库"></a>勾选使用Readme文件初始化这个仓库</h5></li>
</ol>
<p><strong>这个选项勾上，这样码云会自动给你的仓库建立master分支，这点很重要!!!</strong> 我因为这点折腾了很久，因为使用github做图床picgo好像会自动帮你生成master分支，而picgo里的gitee插件不会帮你自动生成分支。</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy9TbmlwYXN0ZV8yMDIwLTAxLTEzXzE2LTEwLTI5LnBuZw?x-oss-process=image/format,png"></p>
<p>点击创建进入下一步</p>
<hr>
<h2 id="3-配置PicGo"><a href="#3-配置PicGo" class="headerlink" title="3. 配置PicGo"></a>3. 配置PicGo</h2><p>安装了<strong>gitee-uploader 1.1.2</strong>插件之后，我们开始配置插件</p>
<h4 id="配置插件的要点如下："><a href="#配置插件的要点如下：" class="headerlink" title="配置插件的要点如下："></a>配置插件的要点如下：</h4><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDExODIxMTMxNi5wbmc?x-oss-process=image/format,png"></p>
<ul>
<li>repo：用户名/仓库名称，比如我自己的仓库leonG7/blogImage，找不到的可以直接复制仓库的url<br>  <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDExODIxMTYyNC5wbmc?x-oss-process=image/format,png"></li>
<li>  branch：分支，这里写上master</li>
<li>  token：填入码云的私人令牌</li>
<li>  path：路径，一般写上img</li>
<li>  customPath：提交消息，这一项和下一项customURL都不用填。在提交到码云后，会显示提交消息，插件默认提交的是 <code>Upload 图片名 by picGo - 时间</code></li>
</ul>
<h4 id="这个token怎么获取，下面登录进自己的码云"><a href="#这个token怎么获取，下面登录进自己的码云" class="headerlink" title="这个token怎么获取，下面登录进自己的码云"></a>这个token怎么获取，下面登录进自己的码云</h4><ol>
<li> 点击头像，进入设置</li>
</ol>
<p><img src="https://gitee.com/leonG7/blogImage/raw/master/img/20200113162632.png"></p>
<ol start="2">
<li> 找到右边安全设置里面的私人令牌</li>
</ol>
<p><img src="https://gitee.com/leonG7/blogImage/raw/master/img/20200113162837.png"></p>
<ol start="3">
<li>点击<code>生成新令牌</code>，把<strong>projects</strong>这一项勾上，其他的不用勾，然后提交<br> <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy9pbWFnZS0yMDIwMDExMzE2MzEwMTQxNi5wbmc?x-oss-process=image/format,png"> 这里需要验证一下密码，验证密码之后会出来一串数字，这一串数字就是你的token，将这串数字复制到刚才的配置里面去。<br> <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy9pbWFnZS0yMDIwMDExMzE2MzQwODkzMi5wbmc?x-oss-process=image/format,png"><blockquote>
<p>注意：这个令牌只会明文显示一次，建议在配置插件的时候再来生成令牌，直接复制进去，搞丢了又要重新生成一个。</p>
</blockquote>
</li>
</ol>
<h4 id="现在保存你刚才的配置，然后将它设置为默认图床，大功告成。"><a href="#现在保存你刚才的配置，然后将它设置为默认图床，大功告成。" class="headerlink" title="现在保存你刚才的配置，然后将它设置为默认图床，大功告成。"></a>现在保存你刚才的配置，然后将它设置为默认图床，大功告成。</h4><p>还有一个插件<strong>gitee 1.2.2-beta</strong>，功能差不多，<code>刚才那个能用的话就不需要用这个</code>，配置的内容有点差别，简单说一下：</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDExMzE2Mzk1Ny5wbmc?x-oss-process=image/format,png"></p>
<ul>
<li>url：图床网站，这里写码云的主页 <a href="https://gitee.com/">https://gitee.com</a></li>
<li>owner：所有者，写上你的码云账号名，如果你不知道你的账号名，进入你刚才的仓库，浏览器url里面有  <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDExMzE2NDIxOC5wbmc?x-oss-process=image/format,png"></li>
<li>repo：仓库名称，只要写上仓库名称就行，比如我自己的仓库blogImage</li>
<li>path：写上路径，一般是img，<strong>这几个项都不用加“ / “符号</strong></li>
<li>token：刚才你获取的个人令牌，两个插件是通用的，如果你用了另一个再来用这个，它会自动读取另一个插件的部分配置，不用重新申请</li>
<li>message：不用填</li>
</ul>
<hr>
<h2 id="4-测试"><a href="#4-测试" class="headerlink" title="4. 测试"></a>4. 测试</h2><p>随便选一张图片上传（picgo也支持剪贴板上传，截图工具推荐win10的_Snipaste_神器！），试试看</p>
<h3 id="超级快有木有！比github快很多，0-1秒上传，而且导入到你的markdown编辑器里面也是秒识别你的图片内容，而如果是github图床上传太慢不说可能还会出现下面这样识别不出来的问题！"><a href="#超级快有木有！比github快很多，0-1秒上传，而且导入到你的markdown编辑器里面也是秒识别你的图片内容，而如果是github图床上传太慢不说可能还会出现下面这样识别不出来的问题！" class="headerlink" title="超级快有木有！比github快很多，0.1秒上传，而且导入到你的markdown编辑器里面也是秒识别你的图片内容，而如果是github图床上传太慢不说可能还会出现下面这样识别不出来的问题！"></a>超级快有木有！比github快很多，0.1秒上传，而且导入到你的markdown编辑器里面也是秒识别你的图片内容，而如果是github图床上传太慢不说可能还会出现下面这样识别不出来的问题！</h3><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDExMzE2NDcyNi5wbmc?x-oss-process=image/format,png"></p>
<h4 id="上传之后默认复制链接，直接粘贴到你的markdown编辑器里，就可以愉快的进行写作了！"><a href="#上传之后默认复制链接，直接粘贴到你的markdown编辑器里，就可以愉快的进行写作了！" class="headerlink" title="上传之后默认复制链接，直接粘贴到你的markdown编辑器里，就可以愉快的进行写作了！"></a>上传之后默认复制链接，直接粘贴到你的markdown编辑器里，就可以愉快的进行写作了！</h4><p>最后推荐一下我的博客写作套件<strong>Typora + PicGo + Snipaste</strong>，Typora写文档，Snipaste一键截图，PicGo一键上传图片返回链接。</p>
<hr>
<h2 id="5-Typora自动上传到picgo图床【教程与排坑】"><a href="#5-Typora自动上传到picgo图床【教程与排坑】" class="headerlink" title="5. Typora自动上传到picgo图床【教程与排坑】"></a>5. Typora自动上传到picgo图床【教程与排坑】</h2><h2 id="1-安装-1"><a href="#1-安装-1" class="headerlink" title="1.安装"></a>1.安装</h2><blockquote>
<p>还是老规矩，软件下载链接文末自取。</p>
</blockquote>
<p>typora升级到最新版本：<code>version 0.9.86(beta)</code></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDMxODEzNTYwNi5wbmc?x-oss-process=image/format,png"></p>
<p>picgo也升级到最新版本：<code>version2.2.2</code></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDMxODEzNTcwNC5wbmc?x-oss-process=image/format,png"></p>
<h2 id="2-配置"><a href="#2-配置" class="headerlink" title="2.配置"></a>2.配置</h2><p>打开typora，点开左上角文件，选择<strong>偏好设置</strong></p>
<ol>
<li> 设置插入图片时为【上传图片】</li>
<li> 勾选【对本地位置的图片应用上述规则】</li>
<li> 在上传服务中选择“PicGo(app)”</li>
<li> 在路径中选择picgo安装目录<strong>PicGo.exe</strong></li>
</ol>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDMxODE0MDIyNy5wbmc?x-oss-process=image/format,png"></p>
<p>点击下面的验证图片上传选项，上传成功！</p>
<p>上传的方法也很简单，将图片复制进去typora就会自动帮你上传了，你也可以右键点击上传图片。<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDMxOTIwNTYyMS5naWY"></p>
<p>可以在【格式】-&gt;【图像】-&gt;【上传所有图片】<br><img src="https://img-blog.csdnimg.cn/20200319205550186.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2Rpc0lMTEw=,size_16,color_FFFFFF,t_70"></p>
<h4 id="当然，要是这么简单的话我肯定不会写成博客的，下面就带大家一起排排坑"><a href="#当然，要是这么简单的话我肯定不会写成博客的，下面就带大家一起排排坑" class="headerlink" title="当然，要是这么简单的话我肯定不会写成博客的，下面就带大家一起排排坑~"></a>当然，要是这么简单的话我肯定不会写成博客的，下面就带大家一起排排坑~</h4><h2 id="3-错误排查"><a href="#3-错误排查" class="headerlink" title="3.错误排查"></a>3.错误排查</h2><h3 id="3-1错误一：Failed-to-fetch"><a href="#3-1错误一：Failed-to-fetch" class="headerlink" title="3.1错误一：Failed to fetch"></a>3.1错误一：Failed to fetch</h3><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDMxODE0NDc0NC5wbmc?x-oss-process=image/format,png"></p>
<p>这个错误一般是由<strong>端口设置错误</strong>造成的，至于我为什么知道，你看看log文件就懂了。打开picgo的log文件。错误提示是端口繁忙。<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDMxODE0NDc1Mi5wbmc?x-oss-process=image/format,png"></p>
<p><code>解决方法</code>：打开picgo设置，点击设置Server选项，<strong>将端口改为36677端口</strong>，这是picgo推荐的默认端口号，然后保存，成功。</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDMxODE0NDgxNy5wbmc?x-oss-process=image/format,png"></p>
<p>不过有的时候，我们的老朋友Failed to fetch还是如约而至，打开端口设置一看，怎么变成了366771？？？？</p>
<p>问题在于端口冲突，如果你打开了多个picgo程序，就会端口冲突，<strong>picgo自动帮你把36677端口改为366771端口</strong>，导致错误。log文件里也写得很清楚。</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDMxODE0NDgyNS5wbmc?x-oss-process=image/format,png"></p>
<p><code>解决方法</code>：<strong>先把picgo中的端口设置改回36677，然后退出所有picgo程序</strong>，再使用typora上传功能（会自动启动picgo程序）</p>
<h3 id="3-2-错误二：-“success”-false"><a href="#3-2-错误二：-“success”-false" class="headerlink" title="3.2 错误二：{“success”,false}"></a>3.2 错误二：{“success”,false}</h3><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDMxODE0MjYyMy5wbmc?x-oss-process=image/format,png"><br>这个错误相信也有很多小伙伴遇到了，原因是<strong>文件名冲突</strong>了，如果你上传过一张image1.jpg的图片，再上传名称一样的图片就会失败，康康log文件(感谢日志！)里也写到了。</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDMxODE0MjUyNi5wbmc?x-oss-process=image/format,png"><br>办法也很简单，打开picgo设置，将**【时间戳重命名】打开**。如图所示：<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDMxOTIxMDEwNy5wbmc?x-oss-process=image/format,png"></p>
<p>再次上传文件，上传成功~</p>
<p><strong>授人以鱼不如授人以渔</strong>，上面的三种情况解决方法教给大家了，但是错误总是千奇百怪层出不穷的，如果下次出现上传错误的提示，请大家找到picgo的log文件，自己查看问题的原因嗷</p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vbGVvbkc3L2Jsb2dJbWFnZS9yYXcvbWFzdGVyL2ltZy8yMDIwMDMxODE0MzAwNS5wbmc?x-oss-process=image/format,png"></p>
<h2 id="6-转载于"><a href="#6-转载于" class="headerlink" title="6. 转载于"></a>6. 转载于</h2><ol>
<li><a href="https://blog.csdn.net/disILLL/article/details/103962241">创建</a></li>
<li><a href="https://blog.csdn.net/disILLL/article/details/104944710?utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-2.control&dist_request_id=1328769.1392.16172799401115595&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-2.control">填坑</a></li>
</ol>
]]></content>
      <categories>
        <category>Hexo</category>
        <category>MarkdownConfig</category>
      </categories>
      <tags>
        <tag>Gitee</tag>
        <tag>Tpyora</tag>
        <tag>图床</tag>
      </tags>
  </entry>
  <entry>
    <title>Thriller</title>
    <url>/2021/03/29/Thriller/</url>
    <content><![CDATA[<table><tr><td bgcolor=#D1EEEE>想你了,Michael</td></tr></table>
<span id="more"></span>

<h1 id="Thriller"><a href="#Thriller" class="headerlink" title="Thriller"></a>Thriller</h1><blockquote>
<p>开创</p>
</blockquote>
<iframe src="//player.bilibili.com/player.html?aid=328634884&bvid=BV1hA411i7PW&cid=205664972&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>

<h1 id="Man-in-the-mirror"><a href="#Man-in-the-mirror" class="headerlink" title="Man in the mirror"></a>Man in the mirror</h1><blockquote>
<p>给自己</p>
</blockquote>
<iframe src="//player.bilibili.com/player.html?aid=328282943&bvid=BV1WA411q7jZ&cid=197389814&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>

]]></content>
      <categories>
        <category>生活</category>
        <category>音乐</category>
      </categories>
      <tags>
        <tag>music</tag>
        <tag>MichaelJackson</tag>
      </tags>
  </entry>
  <entry>
    <title>Youtube-dl常见用法</title>
    <url>/2021/03/26/Youtube-dl/</url>
    <content><![CDATA[<table><tr><td bgcolor=#D1EEEE>#导语</td></tr></table>

<span id="more"></span>

<p><a href="https://github.com/ytdl-org/youtube-dl/">youtube-dl</a> 是一款命令行下的视频下载工具，看着名称像是 YouTube 下载工具，其实这款工具不仅支持 YouTube ，还支持非常多的视频网站，比如优酷、爱奇艺、 bilibili 等，在写这篇日志的时候，暂时不支持腾讯视频。</p>
<p><strong>youtube-dl 常用地址：</strong></p>
<ul>
<li>官网：<a href="https://ytdl-org.github.io/youtube-dl/index.html">https://ytdl-org.github.io/youtube-dl/index.html</a></li>
<li>github：<a href="https://github.com/ytdl-org/youtube-dl/">https://github.com/ytdl-org/youtube-dl/</a></li>
<li>支持的网站：<a href="https://github.com/ytdl-org/youtube-dl/blob/master/docs/supportedsites.md">https://github.com/ytdl-org/youtube-dl/blob/master/docs/supportedsites.md</a></li>
</ul>
<h2 id="youtube-dl-的安装"><a href="#youtube-dl-的安装" class="headerlink" title="youtube-dl 的安装"></a>youtube-dl 的安装</h2><p><strong>linux 下的安装方法：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;yt-dl.org&#x2F;downloads&#x2F;latest&#x2F;youtube-dl -O &#x2F;usr&#x2F;local&#x2F;bin&#x2F;youtube-dl</span><br><span class="line">chmod a+rx &#x2F;usr&#x2F;local&#x2F;bin&#x2F;youtube-dl</span><br></pre></td></tr></table></figure>

<p><strong>macOS 下的安装方法：</strong></p>
<p>Linux 下的安装方法也适合 macOS ，也可以使用 <a href="https://brew.sh/">brew</a> 安装。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">brew install youtube-dl ffmpeg</span><br></pre></td></tr></table></figure>

<h2 id="youtube-dl的常见用法"><a href="#youtube-dl的常见用法" class="headerlink" title="youtube-dl的常见用法"></a>youtube-dl的常见用法</h2><p><strong>视频相关</strong></p>
<p>默认情况下，youtube-dl会自动选择一个视频，但是这个视频不一定是质量最好的，我们可以自己选择需要下载的视频。</p>
<p>因为 YouTube 采用了音视频分离的方式，如果安装了 ffmpeg，youtube-dl 会下载质量最好的视频和音频进行合并。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">youtube-dl https:&#x2F;&#x2F;www.youtube.com&#x2F;playlist?list&#x3D;PLd9hCvj34W5hIJ855osxqJ-fjgsmNB69n --playlist-start 11 --playlist-end 20</span><br></pre></td></tr></table></figure>

<p><code>-F</code> ：列出所有的音视频文件</p>
<p><img src="https://s.wker.com/uploads/2019/09/youtube-dl-F.png" alt="youtube-dl -F 参数的用法"></p>
<p><code>-f 137,136,135</code> ：下载指定的文件，这里的137就是 <code>-F</code> 列表中的 format code</p>
<p><code>-f 135-137,248-250</code> ：下载指定的文件</p>
<p><code>-f bestvideo+bestaudio</code> ：YouTube 高质量的视频是音视频分离的，如果安装了 ffmpeg ，下载完成会自动把高质量的音视频整合成在一起。也可以指定 bestvideo 的格式，如果没有，还可以指定第二种格式，比如 <code>-f bestvideo[ext=mp4]/bestvideo[ext=webm]+bestaudio[ext=m4a]</code>，没有 mp4 格式，下载 webm 格式。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">youtube-dl --proxy socks5:&#x2F;&#x2F;127.0.0.1:1080 https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v&#x3D;0pdGhuAiViA -f 137+140</span><br></pre></td></tr></table></figure>

<p><code>--playlist-start 41</code> ：下载播放列表的起始</p>
<p><code>--playlist-end 50</code> ：下载播放列表的结束</p>
<p><code>--playlist-items ITEM_SPEC</code>：下载播放列表里特定的选集，比如 –playlist-items 1,3,5,7-10，就会下载1、3、5、7、8、9、10集。</p>
<p><strong>音频相关</strong></p>
<p>youtube-dl 功能非常强大，可以直接用 <code>-F</code> 参数查看音频文件进行下载，可以把视频下载下来转换成音频，但需要安装 ffmpeg 。</p>
<p><code>-x, --extract-audio</code> ：将视频文件转换为纯音频文件（需要安装 ffmpeg）</p>
<p><code>--audio-format FORMAT</code> ：指定音频格式: “best”, “aac”, “flac”, “mp3”, “m4a”, “opus”, “vorbis”, 或者 “wav”，默认是“best”，可以和 -x 搭配使用</p>
<p><code>--embed-thumbnail</code> ：给音频文件写入封面</p>
<p><strong>字幕相关</strong></p>
<p><code>--write-sub</code> ：下载字幕文件</p>
<p><code>--write-auto-sub</code> ：下载自动生成的字幕文件，仅支持 YouTube</p>
<p><code>--all-subs</code> ：下载所有可用的字幕</p>
<p><code>--list-subs</code> ：列出可下载的字幕</p>
<p><code>--sub-format FORMAT</code> ：字幕格式，接受格式偏好，如：“srt”（指定格式）或者“ass/srt/vtt”（首选格式，没有ass就下载src，没有src就下载vtt）</p>
<p><code>--sub-lang LANGS</code> ：要下载多种语言的字幕，可以用逗号分隔，先使用 –list-subs 表示可用的语言标签</p>
<p><code>--embed-subs</code> ：把字幕合并到视频中，只支持 mp4、mkv 和 webm 格式的视频</p>
<p><strong>其他参数</strong></p>
<p><code>-U</code> ：升级 youtube-dl</p>
<p><code>--version</code> ：查看 youtube-dl 的版本</p>
<p><code>--proxy URL</code> ：设置代理，比如：–proxy socks5://127.0.0.1:1080</p>
<p><code>-a, --batch-file FILE</code> ：从文件中获取需要下载的URL</p>
<p><code>-r, --limit-rate RATE</code> ：下载限速（写法： 50K 或者 4.2M）</p>
<p><code>-R, --retries RETRIES</code> ：重试次数 （默认10）， 也可以使用“infinite”</p>
<p><code>-u, --username USERNAME</code> ：登录后下载，这是用户名</p>
<p><code>-p, --password PASSWORD</code> ：设置账户登录密码，如果此选项未使用，youtube-dl将交互式地询问</p>
<p><code>--sleep-interval SECONDS</code> ：在下载多个视频时，设置每个视频的下载间隔，单位为秒</p>
<p><code>--merge-output-format FORMAT</code> ：在下载的时候，有的时候需要 ffmpeg 对视频和音频进行合并，可以定义合并后的视频格式，可以是 mkv 、mp4、ogg、webm 或者 flv。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>在使用 youtube-dl 的时候，记得经常升级，因为一些视频网站会修改页面的布局或者代码，如果不及时升级，可能会解析不了部分数据导致视频下载不了。</p>
<p><strong>扩展阅读：</strong></p>
<p><a href="https://clipgrab.org/">ClipGrab</a>，一款命令行下的 YouTube 视频下载工具。</p>
<p><a href="https://www.ffmpeg.org/">ffmpeg</a>, A complete, cross-platform solution to record, convert and stream audio and video.</p>
<p><a href="https://www.4kdownload.com/products/product-videodownloader">4K Video Downloader</a>, 4K Video Downloader is cross-platform, which allows downloading videos, playlists, channels and subtitles from YouTube, Facebook, Vimeo and other video sites in high quality.</p>
]]></content>
      <categories>
        <category>工具</category>
        <category>视频下载</category>
      </categories>
      <tags>
        <tag>视频下载</tag>
        <tag>Youtube</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World/曹圣洁的第一篇博客</title>
    <url>/2021/02/24/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<span id="more"></span>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
      <categories>
        <category>Hexo</category>
        <category>Configuration</category>
      </categories>
      <tags>
        <tag>建站</tag>
      </tags>
  </entry>
  <entry>
    <title>NewPageConfig</title>
    <url>/2021/02/19/%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0%E6%A8%A1%E7%89%88/</url>
    <content><![CDATA[<blockquote>
<p>博客页面 基本设置</p>
</blockquote>
<span id="more"></span>

<h1 id="updated"><a href="#updated" class="headerlink" title="updated:"></a>updated:</h1><p> 更新日期，其它与上面的建立日期类似<br> 不过在页面每篇文章顶部，是更新于……<br> 在主题配置文件中，是 updated_at</p>
<h1 id="permalink"><a href="#permalink" class="headerlink" title="permalink:"></a>permalink:</h1><p> 若站点配置文件下的 permalink 配置了 title<br> 则可以替换文章 URL 里面的 title（文章标题）</p>
<h1 id="categories"><a href="#categories" class="headerlink" title="categories:"></a>categories:</h1><p> 分类，支持多级，比如：</p>
<ul>
<li>technology</li>
<li>computer</li>
<li>computer-aided-art<br>则为 technology/computer/computer-aided-art<br>（不适用于 layout: page）</li>
</ul>
<h1 id="tags"><a href="#tags" class="headerlink" title="tags:"></a>tags:</h1><p> 标签<br> 多个可以这样写 [标签1,标签2,标签3]<br> （不适用于 layout: page）   </p>
<h1 id="description"><a href="#description" class="headerlink" title="description:"></a>description:</h1><p> 文章的描述，在每篇文章标题下方显示<br> 并且作为网页的 description 元数据<br> 如果不写，则自动取 <!-- more --><br> 之前的文字作为网页的 description 元数据</p>
<h1 id="keywords"><a href="#keywords" class="headerlink" title="keywords:"></a>keywords:</h1><p> 关键字，并且作为网页的 keywords 元数据<br> 如果不写，则自动取 tags 里的项<br> 作为网页的 keywords 元数据</p>
<h1 id="comments"><a href="#comments" class="headerlink" title="comments:"></a>comments:</h1><p> 是否开启评论<br> 默认值是 true<br> 要关闭写 false</p>
<h1 id="layout"><a href="#layout" class="headerlink" title="layout:"></a>layout:</h1><p> 页面布局，默认值是 post，默认值可以在<br> 站点配置文件中修改 default_layout<br> 另：404 页面可能用到，将其值改为 false</p>
<h1 id="type"><a href="#type" class="headerlink" title="type:"></a>type:</h1><p> categories，目录页面<br> tags，标签页面<br> picture，用来生成 group-pictures<br> quote？<br> <a href="https://io-oi.me/tech/hello-world/">https://io-oi.me/tech/hello-world/</a></p>
<h1 id="photos"><a href="#photos" class="headerlink" title="photos:"></a>photos:</h1><p> Gallery support，用来支持画廊╱相册，用法如下：</p>
<ul>
<li>photo_url_1</li>
<li>photo_url_2</li>
<li>photo_url_3<br><a href="https://io-oi.me/tech/hello-world/">https://io-oi.me/tech/hello-world/</a></li>
</ul>
<h1 id="link"><a href="#link" class="headerlink" title="link:"></a>link:</h1><p> 文章的外部链接<br> <a href="https://io-oi.me/tech/hello-world/">https://io-oi.me/tech/hello-world/</a></p>
<h1 id="image"><a href="#image" class="headerlink" title="image:"></a>image:</h1><p> 自定义的文章摘要图片，只在页面展示，文章内消失<br> 此项只有参考本文 5.14 节配置好，否则请勿添加！</p>
<h1 id="sticky"><a href="#sticky" class="headerlink" title="sticky:"></a>sticky:</h1><p> 文章置顶<br> 此项只有参考本文 5.15 节配置好，否则请勿添加！</p>
<h1 id="password"><a href="#password" class="headerlink" title="password:"></a>password:</h1><p> 文章密码，此项只有参考教程：<br> <a href="http://shenzekun.cn/hexo%E7%9A%84next%E4%B8%BB%E9%A2%98%E4%B8%AA%E6%80%A7%E5%8C%96%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B.html">http://shenzekun.cn/hexo的next主题个性化配置教程.html</a><br> 第 24 节，配置好，否则请勿添加！<br> 发现还是有 bug 的，就是右键在新标签中打开<br> 然后无论是否输入密码，都能看到内容</p>
]]></content>
      <categories>
        <category>Hexo</category>
        <category>Configuration</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>post</tag>
      </tags>
  </entry>
  <entry>
    <title>淘汰</title>
    <url>/2021/03/15/%E6%B7%98%E6%B1%B0/</url>
    <content><![CDATA[<table><tr><td bgcolor=#D1EEEE>#好听</td></tr></table>

<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=65528&auto=0&height=66"></iframe>
<span id="more"></span>
# title1
## title2
### title3
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ code</span><br></pre></td></tr></table></figure>
# categories:
 列表：
 - computer
 - computer-aided-art

]]></content>
      <categories>
        <category>生活</category>
        <category>音乐</category>
      </categories>
      <tags>
        <tag>music</tag>
      </tags>
  </entry>
  <entry>
    <title>考研规划</title>
    <url>/2021/02/24/%E8%80%83%E7%A0%94%E8%A7%84%E5%88%92/</url>
    <content><![CDATA[<table><tr><td bgcolor=#D1EEEE>#考研计划时间线</td></tr></table>

<span id="more"></span>

<h1 id="title1"><a href="#title1" class="headerlink" title="title1"></a>title1</h1><h2 id="title2"><a href="#title2" class="headerlink" title="title2"></a>title2</h2><h3 id="title3"><a href="#title3" class="headerlink" title="title3"></a>title3</h3><p>More info: <a href="/source/_html/%E8%80%83%E7%A0%94%E8%A7%84%E5%88%92%E5%AF%BC%E5%9B%BE.html">Click</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ code</span><br></pre></td></tr></table></figure>
<h1 id="categories"><a href="#categories" class="headerlink" title="categories:"></a>categories:</h1><p> 列表：</p>
<ul>
<li>computer</li>
<li>computer-aided-art</li>
</ul>
]]></content>
      <categories>
        <category>考研</category>
      </categories>
      <tags>
        <tag>考研</tag>
      </tags>
  </entry>
  <entry>
    <title>篝火旁</title>
    <url>/2021/02/19/%E9%9F%B3%E4%B9%90%E5%A4%96%E9%93%BE/</url>
    <content><![CDATA[<p>篝火旁</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=518725853&auto=0&height=66"></iframe>





]]></content>
      <categories>
        <category>生活</category>
        <category>音乐</category>
      </categories>
      <tags>
        <tag>music</tag>
      </tags>
  </entry>
  <entry>
    <title>高数</title>
    <url>/2021/03/22/%E9%AB%98%E6%95%B0/</url>
    <content><![CDATA[<table><tr><td bgcolor=#D1EEEE>高等数学</td></tr></table><span id="more"></span>

<h1 id="极限与连续"><a href="#极限与连续" class="headerlink" title="极限与连续"></a>极限与连续</h1><h2 id="极限定义（左右极限）"><a href="#极限定义（左右极限）" class="headerlink" title="极限定义（左右极限）"></a>极限定义（左右极限）</h2><h3 id="P4-注解5"><a href="#P4-注解5" class="headerlink" title="P4 注解5"></a>P4 注解5</h3><p><img src="/images/master/advMath1.png"></p>
<h2 id="极限性质"><a href="#极限性质" class="headerlink" title="极限性质"></a>极限性质</h2><h3 id="夹逼定理"><a href="#夹逼定理" class="headerlink" title="夹逼定理"></a>夹逼定理</h3><p><img src="/images/master/advMath2.png"></p>
<h2 id="连续"><a href="#连续" class="headerlink" title="连续"></a>连续</h2><h3 id="介值定理（闭区间上连续函数的性质）"><a href="#介值定理（闭区间上连续函数的性质）" class="headerlink" title="介值定理（闭区间上连续函数的性质）"></a>介值定理（闭区间上连续函数的性质）</h3><p><img src="/images/master/advMath3.png"></p>
<h3 id="常用的基本极限"><a href="#常用的基本极限" class="headerlink" title="常用的基本极限"></a>常用的基本极限</h3><p><img src="https://gitee.com/qpwmio/blog-img-yun/raw/master/img/Image.png"></p>
<h2 id="P14-题型不定型极限计算"><a href="#P14-题型不定型极限计算" class="headerlink" title="P14 题型不定型极限计算"></a>P14 题型不定型极限计算</h2><h3 id="多阶考虑精确度是否可以使用等价无穷小）"><a href="#多阶考虑精确度是否可以使用等价无穷小）" class="headerlink" title="多阶考虑精确度是否可以使用等价无穷小）"></a>多阶考虑精确度是否可以使用等价无穷小）</h3><p><img src="/images/master/advMath4.png"></p>
<h3 id="无穷比无穷型注意事项"><a href="#无穷比无穷型注意事项" class="headerlink" title="无穷比无穷型注意事项"></a>无穷比无穷型注意事项</h3><p><img src="/images/master/advMath5.png"><br><img src="/images/master/advMath6.png"></p>
<h3 id="加减法在同阶（精确度相同）可以使用等价无穷小"><a href="#加减法在同阶（精确度相同）可以使用等价无穷小" class="headerlink" title="加减法在同阶（精确度相同）可以使用等价无穷小"></a>加减法在同阶（精确度相同）可以使用等价无穷小</h3><p><img src="/images/master/advMath13.png"></p>
<h2 id="P19-题型n项和或积的极限运算"><a href="#P19-题型n项和或积的极限运算" class="headerlink" title="P19 题型n项和或积的极限运算"></a>P19 题型n项和或积的极限运算</h2><h3 id="先和极限"><a href="#先和极限" class="headerlink" title="先和极限"></a>先和极限</h3><p><img src="/images/master/advMath10.png"></p>
<h3 id="用夹逼定理"><a href="#用夹逼定理" class="headerlink" title="用夹逼定理"></a>用夹逼定理</h3><p><img src="/images/master/advMath11.png"><br><img src="/images/master/advMath12.png"></p>
<h1 id="导数与微分"><a href="#导数与微分" class="headerlink" title="导数与微分"></a>导数与微分</h1><h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><h3 id="可微-注解"><a href="#可微-注解" class="headerlink" title="可微-注解"></a>可微-注解</h3><p><img src="/images/master/advMath7.png"><br><img src="/images/master/advMath8.png"></p>
<h2 id="反函数求导"><a href="#反函数求导" class="headerlink" title="反函数求导"></a>反函数求导</h2><h3 id="P33-反函数例题"><a href="#P33-反函数例题" class="headerlink" title="P33 反函数例题"></a>P33 反函数例题</h3><p><img src="/images/master/advMath9.png"></p>
<h1 id="一元函数微分学的应用"><a href="#一元函数微分学的应用" class="headerlink" title="一元函数微分学的应用"></a>一元函数微分学的应用</h1><h2 id="中值定理"><a href="#中值定理" class="headerlink" title="中值定理"></a>中值定理</h2><h3 id="P54-题型一-f-n-ξ-0）（罗尔型）"><a href="#P54-题型一-f-n-ξ-0）（罗尔型）" class="headerlink" title="P54 题型一 f^n ξ = 0）（罗尔型）"></a>P54 题型一 f^n ξ = 0）（罗尔型）</h3><p><img src="/images/master/advMath15.png"></p>
<h3 id="P65-拉格朗日中值定理的惯性思维补充"><a href="#P65-拉格朗日中值定理的惯性思维补充" class="headerlink" title="P65 拉格朗日中值定理的惯性思维补充"></a>P65 拉格朗日中值定理的惯性思维补充</h3><p><img src="https://gitee.com/qpwmio/blog-img-yun/raw/master/img/image-20210401215758387.png"></p>
<p><img src="https://gitee.com/qpwmio/blog-img-yun/raw/master/img/20210401220433.png"></p>
<p><img src="https://gitee.com/qpwmio/blog-img-yun/raw/master/img/20210401220446.png"></p>
<h3 id="P65-例4"><a href="#P65-例4" class="headerlink" title="P65 例4"></a>P65 例4</h3><p><img src="https://gitee.com/qpwmio/blog-img-yun/raw/master/img/20210401220454.png"></p>
<h3 id="P70-题型9-不等式的证明-补充"><a href="#P70-题型9-不等式的证明-补充" class="headerlink" title="P70 题型9 不等式的证明(补充)"></a>P70 题型9 不等式的证明(补充)</h3><p><img src="https://gitee.com/qpwmio/blog-img-yun/raw/master/img/20210401220500.png"></p>
]]></content>
      <categories>
        <category>考研</category>
        <category>高等数学</category>
      </categories>
      <tags>
        <tag>考研</tag>
        <tag>高等数学</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo进阶配置</title>
    <url>/2021/03/27/Hexo%E4%BC%98%E5%8C%96-%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD/</url>
    <content><![CDATA[<table><tr><td bgcolor=#D1EEEE>#Hexo 搭建个人博客系列：进阶设置篇</td></tr></table>
本篇文章介绍了如何为 Hexo 博客集成更多强大的功能。

<p>第一章介绍了在站点中集成基于三方插件的数据统计服务，包括站点 PV 和 PU 统计、站点运行时间统计、文章 PV 统计、站点和文章字数统计等。</p>
<p>第二章介绍了针对于站点的个性化设置方案，包括添加搞怪的网页标题，添加站内搜索功能，添加热门文章排行榜页面，添加豆瓣阅读 / 电影 / 游戏等资料页面，添加在线聊天和即时反馈等功能。</p>
<p>第三章介绍了针对于文章页面的个性化设置方案，包括在文章末尾添加评论组件、评分组件、打赏入口、版权声明、推荐文章等，为文章中的图片添加点击灯箱效果，以及为文章设置访问密码。</p>
<span id="more"></span>
<h1 id="数据统计"><a href="#数据统计" class="headerlink" title="数据统计"></a>数据统计</h1><h2 id="站点访问量统计"><a href="#站点访问量统计" class="headerlink" title="站点访问量统计"></a>站点访问量统计</h2><p>该功能由 <a href="http://ibruce.info/2015/04/04/busuanzi/">不蒜子</a> 提供，效果如下图：</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/busuanzi-site-footer.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/busuanzi-site-footer.png" alt="站点访问统计"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/busuanzi-site-footer.png">站点访问统计</a></p>
<p>左侧数据表示独立访客数 UV，右侧数据表示网站浏览量 PV，访客数和浏览量的区别在于一个用户连续点击 n 篇文章，会记录 n 次浏览量，但只记录一次访客数。</p>
<p>由于不蒜子是基于域名来进行统计计算的，所以通过 localhost:4000 端口访问的时候统计数据 PV 和 UV 都会异常的大，属于正常现象。</p>
<p>在页脚布局模板文件首行添加如下代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next\layout_partial\footer.swig&lt;script</span><br><span class="line">  async</span><br><span class="line">  src&#x3D;&quot;https:&#x2F;&#x2F;dn-lbstatics.qbox.me&#x2F;busuanzi&#x2F;2.3&#x2F;busuanzi.pure.mini.js&quot;</span><br><span class="line">&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>在主题配置文件中做出如下修改：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next_config.ymlbusuanzi_count:</span><br><span class="line">  enable: true</span><br><span class="line">  total_visitors: true # 访客数</span><br><span class="line">  total_visitors_icon: user</span><br><span class="line">  total_views: true # 访问量</span><br><span class="line">  total_views_icon: eye</span><br><span class="line">  post_views: false</span><br><span class="line">  post_views_icon: eye</span><br></pre></td></tr></table></figure>

<p>刷新浏览器即可生效。</p>
<p>高阶用法：通过修改代码来自定义统计文案，如果你想使用本站统计文案，需要对不蒜子的代码做出如下修改：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next\layout_third-party\analytics\busuanzi-counter.swig  &#123;% if theme.busuanzi_count.total_visitors %&#125;</span><br><span class="line">-   &lt;span class&#x3D;&quot;site-uv&quot; title&#x3D;&quot;&#123;&#123; __(&#39;footer.total_visitors&#39;) &#125;&#125;&quot;&gt;</span><br><span class="line">+   &lt;span class&#x3D;&quot;site-uv&quot;&gt;</span><br><span class="line">+     &#123;&#123; __(&#39;footer.total_visitors&#39;, &#39;&lt;span class&#x3D;&quot;busuanzi-value&quot; id&#x3D;&quot;busuanzi_value_site_uv&quot;&gt;&lt;&#x2F;span&gt;&#39;) &#125;&#125;</span><br><span class="line">-     &lt;i class&#x3D;&quot;fa fa-&#123;&#123; theme.busuanzi_count.total_visitors_icon &#125;&#125;&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">-     &lt;span class&#x3D;&quot;busuanzi-value&quot; id&#x3D;&quot;busuanzi_value_site_uv&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">    &lt;&#x2F;span&gt;</span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line">  &#123;% if theme.busuanzi_count.total_views %&#125;</span><br><span class="line">-   &lt;span class&#x3D;&quot;site-pv&quot; title&#x3D;&quot;&#123;&#123; __(&#39;footer.total_views&#39;) &#125;&#125;&quot;&gt;</span><br><span class="line">+   &lt;span class&#x3D;&quot;site-pv&quot;&gt;</span><br><span class="line">+     &#123;&#123; __(&#39;footer.total_views&#39;, &#39;&lt;span class&#x3D;&quot;busuanzi-value&quot; id&#x3D;&quot;busuanzi_value_site_pv&quot;&gt;&lt;&#x2F;span&gt;&#39;) &#125;&#125;</span><br><span class="line">-     &lt;i class&#x3D;&quot;fa fa-&#123;&#123; theme.busuanzi_count.total_views_icon &#125;&#125;&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">-     &lt;span class&#x3D;&quot;busuanzi-value&quot; id&#x3D;&quot;busuanzi_value_site_pv&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">    &lt;&#x2F;span&gt;</span><br><span class="line">  &#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<p>在自定义样式文件中添加如下样式：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes&#x2F;next&#x2F;source&#x2F;css&#x2F;_custom&#x2F;custom.styl&#x2F;&#x2F;修改不蒜子数据颜色</span><br><span class="line">.busuanzi-value &#123;</span><br><span class="line">  color: #1890ff;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后修改统计表述文案：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next\languages\zh-CN.ymlfooter:</span><br><span class="line">  total_views: &quot;历经 %s 次回眸才与你相遇&quot;</span><br><span class="line">  total_visitors: &quot;我的第 %s 位朋友，&quot;</span><br></pre></td></tr></table></figure>

<h2 id="站点运行时间统计"><a href="#站点运行时间统计" class="headerlink" title="站点运行时间统计"></a>站点运行时间统计</h2><p>本章节受 <a href="https://reuixiy.github.io/technology/computer/computer-aided-art/2017/06/09/hexo-next-optimization.html">reuixiy | 打造个性超赞博客 Hexo+NexT+GitHubPages 的超深度优化 #5.7</a> 启发，自行重构了代码逻辑。</p>
<p>在站点底部显示站点已运行时间，效果如下：</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/site-running-time.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/site-running-time.png" alt="站点运行时间"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/site-running-time.png">站点运行时间</a></p>
<p>在主题自定义布局文件中添加以下代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">thems\next\layout_custom\custom.swig&#123;# 页脚站点运行时间统计 #&#125; &#123;% if theme.footer.ages.enable %&#125;</span><br><span class="line">&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;moment@2.22.2&#x2F;moment.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;moment-precise-range-plugin@1.3.0&#x2F;moment-precise-range.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  function timer() &#123;</span><br><span class="line">    var ages &#x3D; moment.preciseDiff(moment(),moment(&#123;&#123; theme.footer.ages.birthday &#125;&#125;,&quot;YYYYMMDD&quot;));</span><br><span class="line">    ages &#x3D; ages.replace(&#x2F;years?&#x2F;, &quot;年&quot;);</span><br><span class="line">    ages &#x3D; ages.replace(&#x2F;months?&#x2F;, &quot;月&quot;);</span><br><span class="line">    ages &#x3D; ages.replace(&#x2F;days?&#x2F;, &quot;天&quot;);</span><br><span class="line">    ages &#x3D; ages.replace(&#x2F;hours?&#x2F;, &quot;小时&quot;);</span><br><span class="line">    ages &#x3D; ages.replace(&#x2F;minutes?&#x2F;, &quot;分&quot;);</span><br><span class="line">    ages &#x3D; ages.replace(&#x2F;seconds?&#x2F;, &quot;秒&quot;);</span><br><span class="line">    ages &#x3D; ages.replace(&#x2F;\d+&#x2F;g, &#39;&lt;span style&#x3D;&quot;color:&#123;&#123; theme.footer.ages.color &#125;&#125;&quot;&gt;$&amp;&lt;&#x2F;span&gt;&#39;);</span><br><span class="line">    div.innerHTML &#x3D; &#96;&#123;&#123; __(&#39;footer.age&#39;)&#125;&#125; $&#123;ages&#125;&#96;;</span><br><span class="line">  &#125;</span><br><span class="line">  var div &#x3D; document.createElement(&quot;div&quot;);</span><br><span class="line">  &#x2F;&#x2F;插入到copyright之后</span><br><span class="line">  var copyright &#x3D; document.querySelector(&quot;.copyright&quot;);</span><br><span class="line">  document.querySelector(&quot;.footer-inner&quot;).insertBefore(div, copyright.nextSibling);</span><br><span class="line">  timer();</span><br><span class="line">  setInterval(&quot;timer()&quot;,1000)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<p>如果 custom.swig 文件不存在，需要手动新建并在布局页面中 body 末尾引入：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next\layout_layout.swig      ...</span><br><span class="line">      &#123;% include &#39;_third-party&#x2F;exturl.swig&#39; %&#125;</span><br><span class="line">      &#123;% include &#39;_third-party&#x2F;bookmark.swig&#39; %&#125;</span><br><span class="line">      &#123;% include &#39;_third-party&#x2F;copy-code.swig&#39; %&#125;</span><br><span class="line"></span><br><span class="line">+     &#123;% include &#39;_custom&#x2F;custom.swig&#39; %&#125;</span><br><span class="line">    &lt;&#x2F;body&gt;</span><br><span class="line">  &lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<p>修改主题配置文件：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next_config.yml  footer:</span><br><span class="line">    ...</span><br><span class="line">+   ages:</span><br><span class="line">+     # site running time</span><br><span class="line">+     enable: true</span><br><span class="line">+     # birthday of your site</span><br><span class="line">+     birthday: 20181001</span><br><span class="line">+     # color of number</span><br><span class="line">+     color: &quot;#1890ff&quot;</span><br></pre></td></tr></table></figure>

<p>然后补全对应文案：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next\languages\zh-CN.yml  footer:</span><br><span class="line">    powered: &quot;由 %s 强力驱动&quot;</span><br><span class="line">    theme: 主题</span><br><span class="line">+   age: 我已在此等候你</span><br><span class="line">    total_views: &quot;历经 %s 次回眸才与你相遇&quot;</span><br><span class="line">    total_visitors: &quot;我的第 %s 位朋友，&quot;</span><br></pre></td></tr></table></figure>

<p>刷新浏览器即可生效。</p>
<p>日期统计计算功能由 <a href="https://momentjs.com/">moment</a> 和 <a href="https://github.com/codebox/moment-precise-range">moment-precise-range</a> 提供，也可用原生 JS Date 对象来实现。</p>
<h2 id="文章访问量统计"><a href="#文章访问量统计" class="headerlink" title="文章访问量统计"></a>文章访问量统计</h2><p>本章节参考 <a href="https://notes.doublemine.me/2015-10-21-%E4%B8%BANexT%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E9%98%85%E8%AF%BB%E9%87%8F%E7%BB%9F%E8%AE%A1%E5%8A%9F%E8%83%BD.html#%E9%85%8D%E7%BD%AELeanCloud">夏末 | 为 NexT 主题添加文章阅读量统计功能</a></p>
<p>该功能基于 <a href="https://leancloud.cn/">LeanCloud</a> 提供后端数据服务，效果如下：</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/post-pageviews.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/post-pageviews.png" alt="文章访问量"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/post-pageviews.png">文章访问量</a></p>
<p>在 LeanCloud 上注册账号并创建应用，新建一个名为 Counter 的 Class，ACL 权限设置为 <strong>无限制</strong>：</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/LeanCloud-Counter-class.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/LeanCloud-Counter-class.png" alt="新建Counter类"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/LeanCloud-Counter-class.png">新建Counter类</a></p>
<p>在 LeanCloud 中的 Class 可以理解为数据库中的数据表。Counter 用于存储记录文章访问量，记录是以 url 作为唯一依据的，所以根据默认的 permalink 组成结构，如果你更改了文章的发布日期和标题中的任意一个，都会造成文章阅读数值的清零重计。</p>
<p>在控制台的 <strong>设置</strong> -&gt; <strong>应用 Key</strong> 中获取 App ID 和 App Key 填入到主题配置文件中：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next_config.ymlleancloud_visitors:</span><br><span class="line">  enable: true</span><br><span class="line">  app_id: ***&lt;app_id***</span><br><span class="line">  app_key: ***&lt;app_key&gt;***</span><br><span class="line">  security: false</span><br><span class="line">  betterPerformance: false</span><br></pre></td></tr></table></figure>

<p>站点上线后可以在 <strong>设置</strong> -&gt; <strong>安全中心</strong> 中添加博客域名到 Web 安全域名中，设置后仅可在该域名下通过 JavaScript SDK 调用服务器资源，借以保护 LeanCloud 应用的数据安全。</p>
<p>如果想要自定义 PV 表述文案，可以修改文章布局模板中的相关代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next\layout_macro\post.swig  &#123;# LeanCould PageView #&#125;</span><br><span class="line">    ...</span><br><span class="line">    &#123;% if theme.post_meta.item_text %&#125;</span><br><span class="line">-     &lt;span class&#x3D;&quot;post-meta-item-text&quot;&gt;&#123;&#123;__(&#39;post.views&#39;) + __(&#39;symbol.colon&#39;) &#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">+     &lt;span class&#x3D;&quot;post-meta-item-text&quot;&gt;&#123;&#123;__(&#39;post.views&#39;)&#125;&#125; &lt;&#x2F;span&gt;</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line">    &lt;span class&#x3D;&quot;leancloud-visitors-count&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">+   &lt;span&gt;℃&lt;&#x2F;span&gt;</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

<p>修改统计表述文案：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes&#x2F;next&#x2F;languages&#x2F;zh-CN.ymlpost:</span><br><span class="line">  views: 热度</span><br></pre></td></tr></table></figure>

<p>刷新浏览器即可生效。</p>
<p>如果遇到如下报错，可能是你配置了 <code>security: true</code> 但又没有做好安全策略配置。</p>
<blockquote>
<p>阅读次数： Counter not initialized! See more at console err msg.</p>
</blockquote>
<p>有以下两种解决方案：</p>
<ul>
<li>下载安装 <a href="https://github.com/theme-next/hexo-leancloud-counter-security">hexo-leancloud-counter-security</a> 插件</li>
<li>在主题配置中设置 <code>security: false</code></li>
</ul>
<p>个人推荐第二种，简单粗暴。</p>
<p>除了 LeanCloud，不蒜子也能提供文章阅读次数统计，但是不蒜子的统计结果只会在文章页显示，而不会显示在首页列表中，相关讨论可以参见 <a href="https://github.com/iissnan/hexo-theme-next/issues/801">阅读计数。对比 LeanCloud 和不蒜子</a></p>
<h2 id="站点及文章字数统计"><a href="#站点及文章字数统计" class="headerlink" title="站点及文章字数统计"></a>站点及文章字数统计</h2><p>该功能由 <a href="https://github.com/theme-next/hexo-symbols-count-time">hexo-symbols-count-time</a> 提供，效果如下图：</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/site-word-count.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/site-word-count.png" alt="站点字数统计"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/site-word-count.png">站点字数统计</a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/post-word-count.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/post-word-count.png" alt="文章字数统计"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/post-word-count.png">文章字数统计</a></p>
<p>在根目录下执行如下命令安装相关依赖</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-symbols-count-time --save</span><br></pre></td></tr></table></figure>

<p>启用该功能需要同时修改站点配置文件和主题配置文件。</p>
<p>将如下配置项添加到<strong>站点配置文件</strong>中，这些配置项主要用于控制每项统计信息是否显示。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">_config.ymlsymbols_count_time:</span><br><span class="line">  symbols: true # 统计单篇文章字数</span><br><span class="line">  time: false # 取消估算单篇文章阅读时间</span><br><span class="line">  total_symbols: true # 统计站点总字数</span><br><span class="line">  total_time: false # 取消估算站点总阅读时间</span><br></pre></td></tr></table></figure>

<p>在<strong>主题配置文件</strong>中做如下修改，这些配置项主要用于控制统计信息的显示样式。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next_config.ymlsymbols_count_time:</span><br><span class="line">  separated_meta: false # 统计信息不换行显示</span><br><span class="line">  item_text_post: true # 文章统计信息中是否显示“本文字数&#x2F;阅读时长”等描述文字</span><br><span class="line">  item_text_total: true # 站点统计信息中是否显示“本文字数&#x2F;阅读时长”等描述文字</span><br><span class="line">  awl: 4 # Average Word Length：平均字符长度</span><br><span class="line">  wpm: 275 # Words Per Minute：阅读速度</span><br></pre></td></tr></table></figure>

<p>汉字的平均字符长度为 1.5，如果在文章中使用纯中文进行写作（没有混杂英文），那么推荐设置 <code>awl: 2</code> 及 <code>wpm: 300</code>，但是如果文章中存在英文，建议设置 <code>awl: 4</code> 及 <code>wpm: 275</code>。</p>
<p>因为修改了站点配置文件，所以需要重新启动服务器才能生效。</p>
<h1 id="站点个性化设置"><a href="#站点个性化设置" class="headerlink" title="站点个性化设置"></a>站点个性化设置</h1><h2 id="搞怪网页标题"><a href="#搞怪网页标题" class="headerlink" title="搞怪网页标题"></a>搞怪网页标题</h2><p>本章节参考 <a href="https://diygod.me/2153/">DIYgod | 我藏好了哦</a></p>
<p>离开和进入页面时动态修改 Tab 标签中的标题。</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/title-trick.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/title-trick.png" alt="搞怪网页标题"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/title-trick.png">搞怪网页标题</a></p>
<p>在主题自定义布局文件中添加以下代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next\layout_custom\custom.swig&#123;# 搞怪网页标题 #&#125; &#123;% if theme.title_trick.enable %&#125;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  var OriginTitile &#x3D; document.title;</span><br><span class="line">  var titleTime;</span><br><span class="line">  document.addEventListener(&quot;visibilitychange&quot;, function() &#123;</span><br><span class="line">    if (document.hidden) &#123;</span><br><span class="line">      document.title &#x3D; &quot;&#123;&#123; theme.title_trick.leave &#125;&#125;&quot; + OriginTitile;</span><br><span class="line">      clearTimeout(titleTime);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      document.title &#x3D; &quot;&#123;&#123; theme.title_trick.enter &#125;&#125;&quot; + OriginTitile;</span><br><span class="line">      titleTime &#x3D; setTimeout(function() &#123;</span><br><span class="line">        document.title &#x3D; OriginTitile;</span><br><span class="line">      &#125;, 2000);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<p>如果 custom.swig 文件不存在，需要手动新建并在布局页面中 body 末尾引入：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next\layout_layout.swig      ...</span><br><span class="line">      &#123;% include &#39;_third-party&#x2F;exturl.swig&#39; %&#125;</span><br><span class="line">      &#123;% include &#39;_third-party&#x2F;bookmark.swig&#39; %&#125;</span><br><span class="line">      &#123;% include &#39;_third-party&#x2F;copy-code.swig&#39; %&#125;</span><br><span class="line"></span><br><span class="line">+     &#123;% include &#39;_custom&#x2F;custom.swig&#39; %&#125;</span><br><span class="line">    &lt;&#x2F;body&gt;</span><br><span class="line">  &lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<p>在主题配置文件中添加以下代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next_config.yml# a trick on website title</span><br><span class="line">title_trick:</span><br><span class="line">  enable: true</span><br><span class="line">  leave: &quot;(つェ⊂)我藏好了哦~&quot;</span><br><span class="line">  enter: &quot;(*´∇｀*) 被你发现啦~&quot;</span><br></pre></td></tr></table></figure>

<h2 id="站内搜索"><a href="#站内搜索" class="headerlink" title="站内搜索"></a>站内搜索</h2><p>该功能由 <a href="https://github.com/theme-next/hexo-generator-searchdb">hexo-generator-searchdb</a> 提供，效果如下图：</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/local-search.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/local-search.png" alt="站内搜索"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/local-search.png">站内搜索</a></p>
<p>在根目录下执行以下命令安装相关依赖：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>

<p>在<strong>主题配置</strong>文件中修改相关字段：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next_config.ymllocal_search:</span><br><span class="line">  enable: true</span><br><span class="line">  trigger: auto # 每次输入改变都执行搜索</span><br><span class="line">  top_n_per_article: 3 # 每篇文章显示的搜索结果数量</span><br><span class="line">  unescape: false</span><br></pre></td></tr></table></figure>

<p>在<strong>站点配置</strong>文件中添加以下字段：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">_config.ymlsearch:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post # 指定搜索范围，可选 post | page | all</span><br><span class="line">  format: html # 指定页面内容形式，可选 html | raw (Markdown) | excerpt | more</span><br><span class="line">  limit: 10000</span><br></pre></td></tr></table></figure>

<p>在自定义样式文件中添加如下样式规则来增加搜索弹窗的页边距：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next\source\css_custom\custom.styl&#x2F;&#x2F;增加搜索弹窗的页边距</span><br><span class="line">.local-search-popup #local-search-result &#123;</span><br><span class="line">  padding: 25px 40px</span><br><span class="line">  height: calc(100% - 95px)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果你同时在站点内启用了 wobblewindow 边缘摆动效果，则有可能会出现背景蒙版叠加在弹窗之前的问题，这种层级叠加异常的问题主要是因为 wobblewindow 中修改了弹窗父元素的 <code>position</code> 定位和 <code>z-index</code> 优先级，目前只能通过修改 localsearch 源码来修复该 Bug：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next\layout_third-party\search\localsearch.swig  $.ajax(&#123;</span><br><span class="line">    url: path,</span><br><span class="line">    dataType: isXml ? &quot;xml&quot; : &quot;json&quot;,</span><br><span class="line">    async: true,</span><br><span class="line">    success: function(res) &#123;</span><br><span class="line">      &#x2F;&#x2F; get the contents from search data</span><br><span class="line">      isfetched &#x3D; true;</span><br><span class="line">-     $(&#39;.popup&#39;).detach().appendTo(&#39;.header-inner&#39;);</span><br><span class="line">+     $(&#39;.popup&#39;).detach().appendTo(&#39;body&#39;);</span><br><span class="line">      var datas &#x3D; isXml ? $(&quot;entry&quot;, res).map(function() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          title: $(&quot;title&quot;, this).text(),</span><br><span class="line">          content: $(&quot;content&quot;,this).text(),</span><br><span class="line">          url: $(&quot;url&quot; , this).text()</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;).get() : res;</span><br><span class="line">      ...</span><br></pre></td></tr></table></figure>

<h2 id="热门文章排行榜"><a href="#热门文章排行榜" class="headerlink" title="热门文章排行榜"></a>热门文章排行榜</h2><p>本章节部分思路参考 <a href="https://thief.one/2017/03/03/Hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/">nMask | Hexo 搭建博客教程 #7.16</a>，自行进行了代码重构。</p>
<p>添加文章阅读次数排行统计页面，效果如下图：</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/top10.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/top10.png" alt="热门文章排行榜"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/top10.png">热门文章排行榜</a></p>
<p>该功能同样是基于 LeanCloud 提供的后端服务支持。具体实现方案如下：</p>
<p>在站点目录下执行以下命令新建页面</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ hexo new page top</span><br></pre></td></tr></table></figure>

<p>在主题配置文件中新增一项菜单入口：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next_config.yml  menu:</span><br><span class="line">    home: &#x2F; || home</span><br><span class="line">+   top: &#x2F;top&#x2F; || signal</span><br><span class="line">    tags: &#x2F;tags&#x2F; || tags</span><br><span class="line">    categories: &#x2F;categories&#x2F; || th</span><br><span class="line">    archives: &#x2F;archives&#x2F; || archive</span><br><span class="line">    about: &#x2F;about&#x2F; || user</span><br></pre></td></tr></table></figure>

<p>在语言包中新增菜单中文：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next\languages\zh-CN.yml  menu:</span><br><span class="line">    home: 首页</span><br><span class="line">    archives: 归档</span><br><span class="line">    categories: 分类</span><br><span class="line">    tags: 标签</span><br><span class="line">    about: 关于</span><br><span class="line">+   top: 排行榜</span><br></pre></td></tr></table></figure>

<p>然后在新增的排行榜页面内添加以下内容：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">source\top\index.md---</span><br><span class="line">title: 热门文章Top 10</span><br><span class="line">comments: false</span><br><span class="line">date: 2018-10-30 00:54:50</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">&lt;div id&#x3D;&quot;post-rank&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src&#x3D;&quot;&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;leancloud-storage@3.10.0&#x2F;dist&#x2F;av-min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  var APP_ID &#x3D; ******;  &#x2F;&#x2F;输入个人LeanCloud账号AppID</span><br><span class="line">  var APP_KEY &#x3D; ******;  &#x2F;&#x2F;输入个人LeanCloud账号AppKey</span><br><span class="line">  AV.init(&#123;</span><br><span class="line">    appId: APP_ID,</span><br><span class="line">    appKey: APP_KEY</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  var query &#x3D; new AV.Query(&#39;Counter&#39;);&#x2F;&#x2F;表名</span><br><span class="line">  query.descending(&#39;time&#39;); &#x2F;&#x2F;结果按阅读次数降序排序</span><br><span class="line">  query.limit(10);  &#x2F;&#x2F;最终只返回10条结果</span><br><span class="line">  query.find().then( response &#x3D;&gt; &#123;</span><br><span class="line">    var content &#x3D; response.reduce( (accum, &#123;attributes&#125;) &#x3D;&gt; &#123;</span><br><span class="line">      accum +&#x3D; &#96;&lt;p&gt;&lt;div class&#x3D;&quot;prefix&quot;&gt;热度 $&#123;attributes.time&#125; ℃&lt;&#x2F;div&gt;&lt;div&gt;&lt;a href&#x3D;&quot;$&#123;attributes.url&#125;&quot;&gt;$&#123;attributes.title&#125;&lt;&#x2F;a&gt;&lt;&#x2F;div&gt;&lt;&#x2F;p&gt;&#96;</span><br><span class="line">      return accum;</span><br><span class="line">    &#125;,&quot;&quot;)</span><br><span class="line">    document.querySelector(&quot;#post-rank&quot;).innerHTML &#x3D; content;</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch( error &#x3D;&gt; &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style type&#x3D;&quot;text&#x2F;css&quot;&gt;</span><br><span class="line">  #post-rank &#123;</span><br><span class="line">    text-align: center;</span><br><span class="line">  &#125;</span><br><span class="line">  #post-rank .prefix &#123;</span><br><span class="line">    color: #ff4d4f;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<p>本是根据 <a href="https://thief.one/2017/03/03/Hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/">nMask | Hexo 搭建博客教程 #7.16</a> 引入 v0.6.1 的脚本来实现该功能，结果发现出现如下 Bug：</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/LeanCloud-bug.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/LeanCloud-bug.png" alt="LeanCloud v0.6.1 Bug"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/LeanCloud-bug.png">LeanCloud v0.6.1 Bug</a></p>
<p>后来根据 <a href="https://leancloud.cn/docs/leanstorage_guide-js.html">LeanCloud | JavaScript SDK 安装指南</a> 引入 v3.10.0 的最新脚本，使用过程中虽然功能正常，但是控制台有报错信息:</p>
<blockquote>
<p>Uncaught TypeError: Cannot redefine property: applicationId</p>
</blockquote>
<h2 id="豆瓣阅读-电影-游戏"><a href="#豆瓣阅读-电影-游戏" class="headerlink" title="豆瓣阅读 / 电影 / 游戏"></a>豆瓣阅读 / 电影 / 游戏</h2><p>本章节参考 <a href="https://github.com/mythsman/hexo-douban">mythsman/hexo-douban README.md</a></p>
<p>为站点添加豆瓣阅读 / 电影 / 游戏页面，效果如下：</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/douban-movies.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/douban-movies.png" alt="豆瓣电影"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/douban-movies.png">豆瓣电影</a></p>
<p>在根目录下执行以下命令安装相关依赖：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-douban --save</span><br></pre></td></tr></table></figure>

<p>在站点配置文件中添加以下内容：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">_config.ymldouban:</span><br><span class="line">  user: # 个人豆瓣ID</span><br><span class="line">  builtin: false</span><br><span class="line">  book:</span><br><span class="line">    title: &quot;This is my book title&quot;</span><br><span class="line">    quote: &quot;This is my book quote&quot;</span><br><span class="line">  movie:</span><br><span class="line">    title: &quot;This is my movie title&quot;</span><br><span class="line">    quote: &quot;This is my movie quote&quot;</span><br><span class="line">  game:</span><br><span class="line">    title: &quot;This is my game title&quot;</span><br><span class="line">    quote: &quot;This is my game quote&quot;</span><br><span class="line">  timeout: 10000</span><br></pre></td></tr></table></figure>

<ul>
<li>user: 填写豆瓣 ID。登陆豆瓣后点击<strong>个人主页</strong>，此时 url 中最后一段即是用户 ID，一般情况下会是一段数字，如果设置了个人域名的话，则个人域名即为 ID。</li>
<li>builtin: 是否将生成页面的功能嵌入 <code>hexo s</code> 和 <code>hexo g</code> 中。</li>
<li>timeout: 爬取数据的超时时间。</li>
</ul>
<p>如果只想生成某一个页面（比如只生成读书页面），把其他的配置项注释掉即可。</p>
<p>在主题配置文件中新增菜单入口：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next_config.yml  menu:</span><br><span class="line">    home: &#x2F; || home</span><br><span class="line">    tags: &#x2F;tags&#x2F; || tags</span><br><span class="line">    categories: &#x2F;categories&#x2F; || th</span><br><span class="line">    archives: &#x2F;archives&#x2F; || tasks</span><br><span class="line">+   books: &#x2F;books&#x2F; || book</span><br><span class="line">+   movies: &#x2F;movies&#x2F; || video-camera</span><br><span class="line">+   games: &#x2F;games&#x2F; || gamepad</span><br></pre></td></tr></table></figure>

<p>在语言包中新增菜单中文：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next\language\zh_CN.yml  menu:</span><br><span class="line">    home: 首页</span><br><span class="line">    archives: 归档</span><br><span class="line">    categories: 分类</span><br><span class="line">    tags: 标签</span><br><span class="line">+   movies: 电影</span><br><span class="line">+   books: 读书</span><br><span class="line">+   games: 游戏</span><br></pre></td></tr></table></figure>

<p>然后在根目录下执行以下命令生成豆瓣阅读 / 电影 / 游戏页面：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ hexo douban</span><br></pre></td></tr></table></figure>

<p>可选参数:</p>
<ul>
<li>-b | –books: 只生成豆瓣读书页面</li>
<li>-m | –movies: 只生成豆瓣电影页面</li>
<li>-g | –games: 只生成豆瓣游戏页面</li>
</ul>
<p>执行命令后，插件会根据用户提供的 ID 爬取豆瓣中的数据信息并在 <code>public</code> 目录下生成对应的页面，当服务器启动或部署后会将页面显示在对应的菜单路由下。</p>
<p>如果在站点配置中设置了 <code>douban.builtin: false</code>，则每次豆瓣数据变动后需要手动执行一次 <code>hexo douban</code> 来刷新页面数据。如果设置了 <code>douban.builtin: true</code>，则每次执行 <code>hexo s</code> 和 <code>hexo g</code> 的时候将会自动同时执行 <code>hexo douban</code> 命令，但这样可能会增加打包编译的时间。建议如果豆瓣数据变动不频繁的情况下该项设为 <code>false</code> 即可。</p>
<p>通常大家都喜欢用 <code>hexo d</code> 来作为 <code>hexo deploy</code> 命令的简化，但是当安装了 <code>hexo douban</code> 之后， <code>hexo d</code> 就会有歧义而无法执行，因为 <code>hexo douban</code> 跟 <code>hexo deploy</code> 的 Alias 都是 <code>hexo d</code>。</p>
<h2 id="在线聊天"><a href="#在线聊天" class="headerlink" title="在线聊天"></a>在线聊天</h2><p>在线聊天算是一个比较成熟的 SaaS 商业应用了，业内产品如 <a href="https://www.tidiochat.com/">Tidio</a>、 <a href="https://talkjs.com/">TalkJS</a>、<a href="https://www.intercom.com/">Intercom</a>、<a href="https://www.tawk.to/">tawk.to</a> 等，使用体验都很好，交互界面也很干净别致。经过比较，本站最终选择了 Tidio：</p>
<ul>
<li>在个人博客这种业务场景中，几乎用不到它的收费功能，可以算是终身免费了。</li>
<li>Tidio 提供了多种消息回复渠道，包括网页、桌面应用、iOS/Android APP（需要 Google play 服务支持）。</li>
<li>除了在线聊天，Tidio 还可以在线发送邮件，以及关联接收 Fackbook 消息。</li>
<li>在几款产品的界面风格中，还是 Tidio 看起来更加优雅一些，深得我爱。</li>
</ul>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/Tidio.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/Tidio.png" alt="Tidio 界面"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/Tidio.png">Tidio 界面</a></p>
<p>首先需要<a href="https://www.tidiochat.com/panel/login">注册 Tidio 账号</a>，根据引导填写应用信息。进入控制台后，在 <strong>SETTINGS</strong> -&gt; <strong>Developer</strong> -&gt; <strong>Project data</strong> 中获取到 Public Key：</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/tidio-public-key.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/tidio-public-key.png" alt="Tidio Public Key"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/tidio-public-key.png">Tidio Public Key</a></p>
<p>在主题配置文件下添加以下代码并补全 Public Key：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next_config.yml# Tidio online chat</span><br><span class="line"># see: https:&#x2F;&#x2F;www.tidiochat.com</span><br><span class="line">tidio:</span><br><span class="line">  enable: true</span><br><span class="line">  key: # Public_Key</span><br></pre></td></tr></table></figure>

<p>在主题自定义布局文件中添加以下代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next\layout_custom\custom.swig&#123;# Tidio 在线联系功能 #&#125; &#123;% if theme.tidio.enable %&#125;</span><br><span class="line">&lt;script async src&#x3D;&quot;&#x2F;&#x2F;code.tidio.co&#x2F;&#123;&#123; theme.tidio.key &#125;&#125;.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<p>为避免代码加载阻塞页面渲染，需要为脚本添加 <code>async</code> 属性使其异步加载。</p>
<p>如果 custom.swig 文件不存在，需要手动新建并在布局页面中 body 末尾引入：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next\layout_layout.swig      ...</span><br><span class="line">      &#123;% include &#39;_third-party&#x2F;exturl.swig&#39; %&#125;</span><br><span class="line">      &#123;% include &#39;_third-party&#x2F;bookmark.swig&#39; %&#125;</span><br><span class="line">      &#123;% include &#39;_third-party&#x2F;copy-code.swig&#39; %&#125;</span><br><span class="line"></span><br><span class="line">+     &#123;% include &#39;_custom&#x2F;custom.swig&#39; %&#125;</span><br><span class="line">    &lt;&#x2F;body&gt;</span><br><span class="line">  &lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<p>刷新页面即可在右下角看到 Tidio 的会话标志了。接下来可以在 Tidio 控制台的 <strong>Channel</strong> -&gt; <strong>Live chat</strong> -&gt; <strong>Appearance</strong> 中根据提示定制聊天对话框的主题外观和语言包：</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/Tidio-appearance.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/Tidio-appearance.png" alt="定制Tidio样式与功能"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/Tidio-appearance.png">定制Tidio样式与功能</a></p>
<h2 id="行为监测与反馈"><a href="#行为监测与反馈" class="headerlink" title="行为监测与反馈"></a>行为监测与反馈</h2><p><a href="https://www.hotjar.com/">Hotjar</a> 是一款轻量级的监测分析工具，能够提供用户行为监测和用户反馈分析，相比 Google Analysis 而言，它没有复杂的监测指标与分析报表，更加的简单实用，并且为免费用户提供 2000pv/day 的数据采集服务，适用于小型网站或个人博客的监测分析。</p>
<p>Hotjar 主要提供 <strong>ANALYTICS</strong> 和 <strong>FEEDBACK</strong> 两大类服务。</p>
<p>ANALYTICS 主要用于用户交互行为的监测分析，属于客观分析，包括以下四项具体功能：</p>
<ul>
<li>Heatmaps: 通过热力图可视化用户的鼠标交互行为，帮助理解用户动机和需求。</li>
<li>Recording: 记录用户在站点的行为轨迹，了解应用的可用性以及用户遭遇的问题。</li>
<li>Funnels: 记录每个页面或者步骤的用户流失率。</li>
<li>Forms: 记录表单中每一项输入的完成率，完成时间以及用户流失率。</li>
</ul>
<p>FEEDBACK 主要为用户提供反馈渠道，收集用户观点与数据，属于主观分析，包括以下四项具体功能：</p>
<ul>
<li>Incoming: 即时反馈，了解用户对页面的评价。</li>
<li>Polls: 投票反馈，获取某个问题的用户答案。</li>
<li>Surveys: 问卷调查，以问卷形式获取用户反馈。</li>
<li>Recruiters: 获取用户信息，招募用户用于用户调查或测试反馈。</li>
</ul>
<p>Hotjar 通过以上八项具体而实用的功能为用户提供主客观相结合的监测分析服务，可以说它是所有轻量级分析工具中唯一做到了主客观相结合的，同时也是所有主客观分析工具中，做的最轻量的。</p>
<p>更多功能介绍请参考 <a href="https://www.hotjar.com/tour">Hotjar Features</a></p>
<p>本站点中应用了 Incoming 即时反馈功能，读者可以通过该渠道评价页面或者提交勘误，点击悬挂在屏幕右侧的 Feedback 按钮弹出对话框，点击人物头像评价后将会跳转到如下界面：</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/hotjar-feedback.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/hotjar-feedback.png" alt="Hotjar Incoming Feedback"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/hotjar-feedback.png">Hotjar Incoming Feedback</a></p>
<p>你可以在此页面输入反馈内容，并通过点击左下角的按钮在当前页面上标识目标元素，之后 hotjar 会将反馈内容连同带有高亮标识的页面截图一起提交到后台：</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/hotjar-feedback-screenshot.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/hotjar-feedback-screenshot.png" alt="Incoming Feedback with screenshot "></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/hotjar-feedback-screenshot.png">Incoming Feedback with screenshot</a></p>
<p>更多关于 Incoming Feedback 的介绍请参考 <a href="https://www.hotjar.com/incoming-feedback">Incoming Feedback by Hotjar</a></p>
<p>在站点中集成 Hotjar 的各项功能，需要先 <a href="https://insights.hotjar.com/register">注册 Hotjar 账号</a>，根据指引一步步填写站点信息，然后在控制面板首页中获取 site ID：</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/hotjar-site-id.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/hotjar-site-id.png" alt="Hotjar site ID"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/hotjar-site-id.png">Hotjar site ID</a></p>
<p>在主题配置文件下添加以下代码并补全 site ID：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next_config.yml# Hotjar</span><br><span class="line"># see: https:&#x2F;&#x2F;www.hotjar.com&#x2F;</span><br><span class="line">hotjar:</span><br><span class="line">  enable: true</span><br><span class="line">  siteID: # site ID</span><br></pre></td></tr></table></figure>

<p>在主题自定义布局文件中添加以下代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next\layout_custom\custom.swig&#123;# hotjar 页面反馈 #&#125; &#123;% if theme.hotjar.enable %&#125;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  (function(h,o,t,j,a,r)&#123;</span><br><span class="line">    h.hj&#x3D;h.hj||function()&#123;(h.hj.q&#x3D;h.hj.q||[]).push(arguments)&#125;;</span><br><span class="line">    h._hjSettings&#x3D;&#123;hjid:&#123;&#123; theme.hotjar.siteID &#125;&#125;,hjsv:6&#125;;</span><br><span class="line">    a&#x3D;o.getElementsByTagName(&#39;head&#39;)[0];</span><br><span class="line">    r&#x3D;o.createElement(&#39;script&#39;);r.async&#x3D;1;</span><br><span class="line">    r.src&#x3D;t+h._hjSettings.hjid+j+h._hjSettings.hjsv;</span><br><span class="line">    a.appendChild(r);</span><br><span class="line">  &#125;)(window,document,&#39;https:&#x2F;&#x2F;static.hotjar.com&#x2F;c&#x2F;hotjar-&#39;,&#39;.js?sv&#x3D;&#39;);</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<p>如果 custom.swig 文件不存在，需要手动新建并在布局页面中 body 末尾引入：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next\layout_layout.swig      ...</span><br><span class="line">      &#123;% include &#39;_third-party&#x2F;exturl.swig&#39; %&#125;</span><br><span class="line">      &#123;% include &#39;_third-party&#x2F;bookmark.swig&#39; %&#125;</span><br><span class="line">      &#123;% include &#39;_third-party&#x2F;copy-code.swig&#39; %&#125;</span><br><span class="line"></span><br><span class="line">+     &#123;% include &#39;_custom&#x2F;custom.swig&#39; %&#125;</span><br><span class="line">    &lt;&#x2F;body&gt;</span><br><span class="line">  &lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<p>如此即可将 Hotjar 嵌入到站内，接下来在 Hotjar 控制台菜单中点击 Incoming，然后根据引导一步步配置即时反馈服务即可：</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/hotjar-setup-incoming.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/hotjar-setup-incoming.png" alt="配置 Incoming Feedback"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/hotjar-setup-incoming.png">配置 Incoming Feedback</a></p>
<p>如果你在本站内发现了错别字、病句、失效链接、代码缩进不一致，可以通过页面右侧的 Feedback 反馈。</p>
<h1 id="文章页面个性化设置"><a href="#文章页面个性化设置" class="headerlink" title="文章页面个性化设置"></a>文章页面个性化设置</h1><h2 id="添加评论功能"><a href="#添加评论功能" class="headerlink" title="添加评论功能"></a>添加评论功能</h2><p>Next 支持多款评论系统：</p>
<ul>
<li><a href="https://disqus.com/">Disqus</a>：欧美 UI 风格，支持 Tweet、Facebook 等国外社交软件的三方登陆和一键分享。 <a href="https://blog.disqus.com/disqus-welcomes-the-spruce">Demo</a></li>
<li><a href="https://github.com/imsun/gitment">gitment</a>：必须用 github 账号登陆才能评论，支持 Markdown 语法，与 github issues 页面风格一致 <a href="https://imsun.github.io/gitment/">Demo</a></li>
<li><a href="https://valine.js.org/">Valine</a>：支持匿名评论，支持 Markdown 语法，界面简洁美观</li>
<li><a href="http://changyan.kuaizhan.com/">畅言</a>：国产评论系统，可区分热评和最新评论，论坛贴吧风</li>
<li><a href="https://www.livere.com/">来必力</a>：支持插入图片和 GIF，支持国内外多种社交媒体的三方登陆 <a href="https://www.livere.com/city-demo">Demo</a></li>
</ul>
<p>博客的评论系统不需要太过复杂的功能，我的要求是一定要轻量级，足够简洁美观，并且支持 Markdown 语法，因此我首选 Valine 和 gitment，这两个评论系统都是由国内个人开发的，在此向开发者致敬。</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/valine-comments.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/valine-comments.png" alt="Valine 评论系统"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/valine-comments.png">Valine 评论系统</a></p>
<p>Next 已经内置了 Valine 组件，在主题配置文件中开启评论功能即可，同时，由于 Valine 是基于 Leancloud 提供后端服务的，所以需要填写 LeanCloud 的 App ID 和 App Key。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next_config.ymlvaline:</span><br><span class="line">  enable: true</span><br><span class="line">  appid:  ***&lt;app_id***</span><br><span class="line">  appkey: ***&lt;app_key&gt;***</span><br><span class="line">  notify: false  # 收到新评论是否邮件通知</span><br><span class="line">  verify: false  # 是否开启验证码</span><br><span class="line">  placeholder:  # 默认填充文字</span><br><span class="line">  avatar: mm  # 设置默认评论列表</span><br><span class="line">  guest_info: nick,mail  # 评论区头部表单</span><br><span class="line">  pageSize: 10  # 每页评论数</span><br><span class="line">  visitor: true  # 同时开启文章阅读次数统计</span><br></pre></td></tr></table></figure>

<p>Valine 也附带了阅读统计功能，可以在 Valine 配置项中设置 <code>visitor: true</code> 开启该功能。为避免后端服务冲突，建议不要同时启用 Valine 的阅读统计功能和 <code>leancloud_visitors</code>。</p>
<p>关于如何在收到评论时发送邮件提醒请参照 <a href="http://www.zhaojun.im/hexo-valine-admin/">赵俊 | Hexo 优化 — Valine 扩展之邮件通知</a></p>
<p>Next 暂时不支持通过配置的方式隐藏文章标题下的评论数量，如要隐藏，可在自定义样式文件中添加如下代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes&#x2F;next&#x2F;source&#x2F;css&#x2F;_custom&#x2F;custom.styl&#x2F;&#x2F;屏蔽标题下的评论数量</span><br><span class="line">.post-comments-count &#123;</span><br><span class="line">  display: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果你是轻度洁癖患者，想要隐藏评论区的浏览器和操作系统版本号以拥有更加干净的评论界面，可在自定义样式文件中添加如下代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes&#x2F;next&#x2F;source&#x2F;css&#x2F;_custom&#x2F;custom.styl&#x2F;&#x2F;屏蔽评论组件的多余信息</span><br><span class="line">#comments .vsys &#123;</span><br><span class="line">  display: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="文末版权声明"><a href="#文末版权声明" class="headerlink" title="文末版权声明"></a>文末版权声明</h2><p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/post-copyright.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/post-copyright.png" alt="文章版权声明"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/post-copyright.png">文章版权声明</a></p>
<p>在主题配置文件中开启文章底部的版权声明，版权声明默认使用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议，用户可以根据自身需要修改 <code>licence</code> 字段变更协议。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next_config.ymlpost_copyright:</span><br><span class="line">  enable: true</span><br><span class="line">  license: &lt;a href&#x3D;&quot;https:&#x2F;&#x2F;creativecommons.org&#x2F;licenses&#x2F;by-nc-sa&#x2F;4.0&#x2F;&quot; rel&#x3D;&quot;external nofollow&quot; target&#x3D;&quot;_blank&quot;&gt;CC BY-NC-SA 4.0&lt;&#x2F;a&gt;</span><br></pre></td></tr></table></figure>

<p>默认版权声明中只有 <strong>本文作者</strong>、<strong>本文链接</strong>、<strong>版权声明</strong> 三项，如果你想添加更多内容，如 <strong>创建时间</strong>、<strong>修改时间</strong>、<strong>引用链接</strong> 等，需要修改版权声明的相关代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next\layout_macro\post-copyright.swig&lt;!-- JS库 clipboard 拷贝内容到粘贴板--&gt;</span><br><span class="line">&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;clipboard.js&#x2F;2.0.1&#x2F;clipboard.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- JS库 sweetalert 显示提示信息--&gt;</span><br><span class="line">&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;unpkg.com&#x2F;sweetalert&#x2F;dist&#x2F;sweetalert.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;ul class&#x3D;&quot;post-copyright&quot;&gt;</span><br><span class="line">  &lt;!-- 本文标题 --&gt;</span><br><span class="line">  &lt;li&gt;</span><br><span class="line">    &lt;strong&gt;&#123;&#123; __(&#39;post.copyright.title&#39;) + __(&#39;symbol.colon&#39;) &#125;&#125; &lt;&#x2F;strong&gt;</span><br><span class="line">    &#123;&#123; post.title &#125;&#125;</span><br><span class="line">  &lt;&#x2F;li&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- 本文作者 --&gt;</span><br><span class="line">  &lt;li class&#x3D;&quot;post-copyright-author&quot;&gt;</span><br><span class="line">    &lt;strong&gt;&#123;&#123; __(&#39;post.copyright.author&#39;) + __(&#39;symbol.colon&#39;) &#125;&#125; &lt;&#x2F;strong&gt;</span><br><span class="line">    &#123;&#123; post.author | default(author) &#125;&#125;</span><br><span class="line">  &lt;&#x2F;li&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- 创建时间 --&gt;</span><br><span class="line">  &lt;li&gt;</span><br><span class="line">    &lt;strong&gt;&#123;&#123; __(&#39;post.created&#39;) + __(&#39;symbol.colon&#39;) &#125;&#125; &lt;&#x2F;strong&gt;</span><br><span class="line">    &#123;&#123; post.date.format(&quot;YYYY年MM月DD日 - HH时MM分&quot;) &#125;&#125;</span><br><span class="line">  &lt;&#x2F;li&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- 修改时间 --&gt;</span><br><span class="line">  &lt;li&gt;</span><br><span class="line">    &lt;strong&gt;&#123;&#123; __(&#39;post.modified&#39;) + __(&#39;symbol.colon&#39;) &#125;&#125; &lt;&#x2F;strong&gt;</span><br><span class="line">    &#123;&#123; post.updated.format(&quot;YYYY年MM月DD日 - HH时MM分&quot;) &#125;&#125;</span><br><span class="line">  &lt;&#x2F;li&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- 引用链接 --&gt;</span><br><span class="line">  &lt;li class&#x3D;&quot;post-copyright-link&quot;&gt;</span><br><span class="line">    &lt;strong&gt;&#123;&#123; __(&#39;post.copyright.link&#39;) + __(&#39;symbol.colon&#39;) &#125;&#125;&lt;&#x2F;strong&gt;</span><br><span class="line">    &lt;a href&#x3D;&quot;&#123;&#123; post.url | default(post.permalink) &#125;&#125;&quot; title&#x3D;&quot;&#123;&#123; post.title &#125;&#125;&quot;</span><br><span class="line">      &gt;&#123;&#123; post.url | default(post.permalink) &#125;&#125;&lt;&#x2F;a</span><br><span class="line">    &gt;</span><br><span class="line">    &lt;span class&#x3D;&quot;copy-path&quot; title&#x3D;&quot;点击复制引用链接&quot;</span><br><span class="line">      &gt;&lt;i</span><br><span class="line">        style&#x3D;&quot;cursor: pointer&quot;</span><br><span class="line">        class&#x3D;&quot;fa fa-clipboard&quot;</span><br><span class="line">        data-clipboard-text&#x3D;&quot;[&#123;&#123; post.author | default(author) &#125;&#125;&#39;s Blog | &#123;&#123; post.title &#125;&#125;](&#123;&#123; post.permalink &#125;&#125;)&quot;</span><br><span class="line">        aria-label&#x3D;&quot;&#123;&#123; __(&#39;post.copy_success&#39;) &#125;&#125;&quot;</span><br><span class="line">      &gt;&lt;&#x2F;i</span><br><span class="line">    &gt;&lt;&#x2F;span&gt;</span><br><span class="line">  &lt;&#x2F;li&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- 版权声明 --&gt;</span><br><span class="line">  &lt;li class&#x3D;&quot;post-copyright-license&quot;&gt;</span><br><span class="line">    &lt;strong</span><br><span class="line">      &gt;&#123;&#123; __(&#39;post.copyright.license_title&#39;) + __(&#39;symbol.colon&#39;) &#125;&#125;</span><br><span class="line">    &lt;&#x2F;strong&gt;</span><br><span class="line">    &#123;&#123; __(&#39;post.copyright.license_content&#39;, theme.post_copyright.license) &#125;&#125;</span><br><span class="line">  &lt;&#x2F;li&gt;</span><br><span class="line">&lt;&#x2F;ul&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  var clipboard &#x3D; new ClipboardJS(&quot;.fa-clipboard&quot;);</span><br><span class="line">  clipboard.on(&quot;success&quot;, function(target) &#123;</span><br><span class="line">    var message &#x3D; document.createElement(&quot;div&quot;);</span><br><span class="line">    message.innerHTML &#x3D;</span><br><span class="line">      &#39;&lt;i class&#x3D;&quot;fa fa-check-circle message-icon&quot;&gt;&lt;&#x2F;i&gt;&lt;span class&#x3D;&quot;message-content&quot;&gt;&#39; +</span><br><span class="line">      target.trigger.getAttribute(&quot;aria-label&quot;) +</span><br><span class="line">      &quot;&lt;&#x2F;span&gt;&quot;;</span><br><span class="line">    swal(&#123;</span><br><span class="line">      content: message,</span><br><span class="line">      className: &quot;copy-success-message&quot;,</span><br><span class="line">      timer: 1000,</span><br><span class="line">      button: false</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>在版权样式文件中添加如下样式：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next\source\css_common\components\post\post-copyright.styl.swal-overlay &#123;</span><br><span class="line">  background-color: transparent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.copy-success-message &#123;</span><br><span class="line">  box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.15);</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">  width: auto;</span><br><span class="line">  margin: 16x 0px;</span><br><span class="line">  vertical-align: top;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.copy-success-message .swal-content &#123;</span><br><span class="line">  margin: 0px 0px !important;</span><br><span class="line">  padding: 10px 16px;</span><br><span class="line">  line-height: 1em;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.copy-success-message .message-icon &#123;</span><br><span class="line">  color: #52c41a;</span><br><span class="line">  margin-right: 8px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.copy-success-message .message-content &#123;</span><br><span class="line">  font-size: 14px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后补全版权信息文案字段：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes&#x2F;next&#x2F;languages&#x2F;zh-CN.ymlpost:</span><br><span class="line">  created: 创建时间</span><br><span class="line">  modified: 修改时间</span><br><span class="line">  copy_success: 复制成功</span><br><span class="line">  copyright:</span><br><span class="line">    title: 本文标题</span><br><span class="line">    author: 本文作者</span><br><span class="line">    link: 引用链接</span><br><span class="line">    license_title: 版权声明</span><br><span class="line">    license_content: &quot;本博客所有文章除特别声明外，均采用 %s 许可协议。转载请注明出处！&quot;</span><br></pre></td></tr></table></figure>

<p>点击引用链接后的图标 即可快捷复制 Markdown 引用链接，并将弹出复制成功的提示语。该功能主要借助 <a href="https://clipboardjs.com/">clipboard</a> 和 <a href="https://sweetalert.js.org/">sweetalert</a> 两个 js 库来实现，并参考 <a href="https://ant.design/components/message/">antDesign | message 组件</a> 重写了弹框样式。</p>
<p>在实际使用过程中，并非每篇文章都需要版权声明，如果转载了别人的文章，文末再出现个人版权声明就不太合适。此时可在 Front-Matter 中设定变量 <code>copyright</code> 用于控制是否显示版权信息。修改文章布局模板中相关代码，使得只有当主题配置文件中 <code>post_copyright.enable</code> 字段和 <code>page.copyright</code> 字段同时为 <code>true</code> 时才会插入版权声明：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes&#x2F;next&#x2F;layout&#x2F;_macro&#x2F;post.swig- &#123;% if theme.post_copyright.enable and not is_index %&#125;</span><br><span class="line">+ &#123;% if theme.post_copyright.enable and page.copyright and not is_index %&#125;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &#123;% include &#39;post-copyright.swig&#39; with &#123; post: post &#125; %&#125;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  &#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<p>为了批量为每篇新文章设定该变量并赋默认值，可以修改草稿模板内容，这样以来每篇草稿发布为正文后都会默认显示底部版权信息：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">scaffolds\draft.md  title: &#123;&#123; title &#125;&#125;</span><br><span class="line">  tags:</span><br><span class="line">  categories:</span><br><span class="line">+ copyright: true</span><br></pre></td></tr></table></figure>

<h2 id="添加打赏功能"><a href="#添加打赏功能" class="headerlink" title="添加打赏功能"></a>添加打赏功能</h2><p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/post-reward.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/post-reward.png" alt="文章打赏功能"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/post-reward.png">文章打赏功能</a></p>
<p>启用主题配置文件中的打赏相关字段，并将个人收款码图片置于 themes\next\source\images\ 目录下，注意保持图片命名与配置文件中一致：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next_config.ymlreward_comment:</span><br><span class="line">wechatpay: &#x2F;images&#x2F;wechatpay.png</span><br><span class="line">alipay: &#x2F;images&#x2F;alipay.jpg</span><br></pre></td></tr></table></figure>

<p>如果要关闭悬停收款码上的文字抖动效果，可以在自定义样式文件中添加以下代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes&#x2F;next&#x2F;source&#x2F;css&#x2F;_custom&#x2F;custom.styl&#x2F;&#x2F;关闭打赏收款码的文字抖动效果</span><br><span class="line">#QR &gt; div:hover p &#123;</span><br><span class="line">  animation: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>并非每个页面都需要开启打赏功能，可以在 Front-Matter 中添加 <code>reward</code> 字段来控制是否在本文章中添加打赏信息，然后修改文章布局模板中相关的判定条件：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes&#x2F;next&#x2F;layout&#x2F;_macro&#x2F;post.swig- &#123;% if (theme.alipay or theme.wechatpay or theme.bitcoin) and not is_index %&#125;</span><br><span class="line">+ &#123;% if ( post.reward and (theme.alipay or theme.wechatpay or theme.bitcoin) and not is_index %&#125;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &#123;% include &#39;reward.swig&#39; %&#125;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  &#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<p>为了方便可在草稿模板 scaffolds\draft.md 中统一添加 <code>reward</code> 字段默认值：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">scaffolds\draft.md  title: &#123;&#123; title &#125;&#125;</span><br><span class="line">  tags:</span><br><span class="line">  categories:</span><br><span class="line">+ reward: true</span><br></pre></td></tr></table></figure>

<h2 id="添加图片灯箱"><a href="#添加图片灯箱" class="headerlink" title="添加图片灯箱"></a>添加图片灯箱</h2><p>添加灯箱功能，实现点击图片后放大聚焦图片，并支持幻灯片播放、全屏播放、缩略图、快速分享到社交媒体等，该功能由 <a href="https://github.com/fancyapps/fancybox">fancyBox</a> 提供，效果如下：</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/fancybox.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/fancybox.png" alt="fancyBox 灯箱"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/fancybox.png">fancyBox 灯箱</a></p>
<p>在根目录下执行以下命令安装相关依赖：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ git clone https:&#x2F;&#x2F;github.com&#x2F;theme-next&#x2F;theme-next-fancybox3 themes&#x2F;next&#x2F;source&#x2F;lib&#x2F;fancybox</span><br></pre></td></tr></table></figure>

<p>在主题配置文件中设置 <code>fancybox: true</code>：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next_config.ymlfancybox: true</span><br></pre></td></tr></table></figure>

<p>刷新浏览器即可生效。</p>
<h2 id="相关文章推荐"><a href="#相关文章推荐" class="headerlink" title="相关文章推荐"></a>相关文章推荐</h2><p>该功能由 <a href="https://github.com/tea3/hexo-related-popular-posts">hexo-related-popular-posts</a> 插件提供，效果如下：</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/related-post.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/related-post.png" alt="相关文章推荐"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/related-post.png">相关文章推荐</a></p>
<p>在站点根目录中执行以下命令安装依赖：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-related-popular-posts --save</span><br></pre></td></tr></table></figure>

<p>在主题配置文件中开启相关文章推荐功能：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next_config.ymlrelated_posts:</span><br><span class="line">  enable: true</span><br><span class="line">  title: # custom header, leave empty to use the default one</span><br><span class="line">  display_in_home: false</span><br><span class="line">  params:</span><br><span class="line">    maxCount: 5</span><br></pre></td></tr></table></figure>

<p>此时会在每篇文章结尾根据标签相关性和内容相关性来推荐相关文章。</p>
<p>事实上并非每篇文章都需要开启该功能，可在文章 Front-Matter 中设置 <code>related_posts</code> 字段来控制是否在文末显示相关文章，然后修改文章布局模板中相关的判定条件：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes&#x2F;next&#x2F;layout&#x2F;_macro&#x2F;post.swig- &#123;% if theme.related_posts.enable and (theme.related_posts.display_in_home or not is_index) %&#125;</span><br><span class="line">+ &#123;% if theme.related_posts.enable and (theme.related_posts.display_in_home or not is_index) and post.related_posts %&#125;</span><br><span class="line">    &#123;% include &#39;post-related.swig&#39; with &#123; post: post &#125; %&#125;</span><br><span class="line">  &#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<p>为了方便可在草稿模板 scaffolds\draft.md 中统一添加 <code>related_posts</code> 字段默认值：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">scaffolds\draft.md  title: &#123;&#123; title &#125;&#125;</span><br><span class="line">  tags:</span><br><span class="line">  categories:</span><br><span class="line">+ related_posts: true</span><br></pre></td></tr></table></figure>

<h2 id="文章评分"><a href="#文章评分" class="headerlink" title="文章评分"></a>文章评分</h2><p><a href="https://widgetpack.com/">widgetpack</a> 是一款轻量级的插件，提供四项具体的功能：</p>
<ul>
<li>Comments: 评论系统，类似于留言板</li>
<li>Reviews: 评价系统，类似于商品评价</li>
<li>Rating: 星级评分系统</li>
<li>Google Reviews: 关联展示 Google Rating</li>
</ul>
<p>Next 主题中已经集成了 widgetpack 的星级评分系统，用户无须再安装或引入插件脚本，只需在 widgetpack 中注册账号并修改主题配置即可，应用效果如下：</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/rating.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/rating.png" alt="文章评分组件"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/rating.png">文章评分组件</a></p>
<p>在 <a href="https://widgetpack.com/">widgetpack</a> 中注册账号，根据引导填写应用名称和域名创建应用，创建后可在页面左上角看到应用 id。</p>
<p>在主题配置文件中开启评分功能，填写应用 id，并设置评分颜色：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next_config.yml# Star rating support to each article.</span><br><span class="line"># To get your ID visit https:&#x2F;&#x2F;widgetpack.com</span><br><span class="line">rating:</span><br><span class="line">  enable: true</span><br><span class="line">  id: #&lt;app_id&gt;</span><br><span class="line">  color: fadb14</span><br></pre></td></tr></table></figure>

<p>此时刷新浏览器即可在文章末尾看到空的评分栏了。点击评分发现需要以社交账号登陆，而这些社交账号基本都是 facebook、twitter 等墙外的社交软件，限制了评分系统可用性，我们可以在 widgetpack 控制台中修改评分认证机制。</p>
<p>在控制台中点击左上角展开菜单，在 <strong>Rating</strong> -&gt; <strong>Setting</strong> 中将 Vote via 选项改为 Device(cookie) 以开启匿名评分，该选项将基于设备认证访问者身份：</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/rate-vote-via.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/rate-vote-via.png" alt="开启匿名评分"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/rate-vote-via.png">开启匿名评分</a></p>
<p>用户还可以在该页面设定 star 数量和大小。修改后记得勾选右下角的 SAVE SETTING 才会生效。</p>
<p>在实际使用过程中，并非每篇文章都需要开启评分。此时可在 Front-Matter 中设定变量 rating 用于控制是否开启评分。修改文章布局模板中相关代码，使得只有当主题配置文件中 <code>rating.enable</code> 字段和 <code>page.rating</code> 字段同时为 <code>true</code> 才会插入评分组件：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next\layout_macro\post.swig  &#123;% if not is_index %&#125;</span><br><span class="line">-  &#123;% if theme.rating.enable or (theme.vkontakte_api.enable and theme.vkontakte_api.like) or (theme.facebook_sdk.enable and theme.facebook_sdk.like_button) or (theme.needmoreshare2.enable and theme.needmoreshare2.postbottom.enable) or (theme.baidushare and theme.baidushare.type &#x3D;&#x3D;&#x3D; &quot;button&quot; )%&#125;</span><br><span class="line">+  &#123;% if (theme.rating.enable and post.rating) or (theme.vkontakte_api.enable and theme.vkontakte_api.like) or (theme.facebook_sdk.enable and theme.facebook_sdk.like_button) or (theme.needmoreshare2.enable and theme.needmoreshare2.postbottom.enable) or (theme.baidushare and theme.baidushare.type &#x3D;&#x3D;&#x3D; &quot;button&quot; )%&#125;</span><br><span class="line">    &lt;div class&#x3D;&quot;post-widgets&quot;&gt;</span><br><span class="line">    &#123;% if theme.rating.enable %&#125;</span><br><span class="line">      &lt;div class&#x3D;&quot;wp_rating&quot;&gt;</span><br><span class="line">        &lt;div id&#x3D;&quot;wpac-rating&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    &#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<p>为了批量为每篇新文章设定该变量并赋默认值，可以修改草稿模板内容，这样以来每篇草稿发布后都会默认开启评分：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">scaffolds\draft.md  title: &#123;&#123; title &#125;&#125;</span><br><span class="line">  tags:</span><br><span class="line">  categories:</span><br><span class="line">+ rating: true</span><br></pre></td></tr></table></figure>

<p>站点上线后，可以在控制台菜单的 <strong>Site</strong> -&gt; <strong>Setting</strong> 中勾选 Private，使得组件只对应用内指定的域名上生效，这样以来即时别人错填了你的 id 也不会将评分数据误提交到你的应用中了。</p>
<p>widgetpack 与前文提到的 hotjar 在评价反馈功能上的侧重点不一样，widgetpack 更侧重于对文章的评分，而 hotjar 侧重于对整个页面的评分，并提供了文字和截图反馈的渠道。</p>
<h2 id="文章加密访问"><a href="#文章加密访问" class="headerlink" title="文章加密访问"></a>文章加密访问</h2><p>该功能由 <a href="https://github.com/MikeCoder/hexo-blog-encrypt">hexo-blog-encrypt</a> 插件提供，效果如下：</p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/post-encrypt.png"><img src="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/post-encrypt.png" alt="文章加密"></a></p>
<p><a href="http://yearito-1256884783.image.myqcloud.com/hexo-advanced-settings/post-encrypt.png">文章加密</a></p>
<p>在站点根目录中执行以下命令安装依赖：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-blog-encrypt --save</span><br></pre></td></tr></table></figure>

<p>在站点配置文件中添加如下字段：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">_config.ymlencrypt:</span><br><span class="line">  enable: true</span><br><span class="line">  default_abstract: 此文章已被加密，需要输入密码访问。  &#x2F;&#x2F;首页文章列表中加密文章的默认描述文案</span><br><span class="line">  default_message: 请输入密码以阅读这篇私密文章。  &#x2F;&#x2F;文章详情页的密码输入框上的默认描述文案</span><br></pre></td></tr></table></figure>

<p>然后在文章 Front-Matter 中添加 <code>password</code> 字段用于设置文章访问密码。重启服务器，这个时候可能需要经历较长一段时间的加密过程，请耐心等待，加密完成后刷新页面将会显示密码输入框，输入密码后才能继续访问文章内容。</p>
<p>该功能只会加密文章正文，其他内容如打赏、版权信息、标签等则不会被加密隐藏，这样看起来有点奇怪，所以建议加密文章隐藏掉打赏和版权信息内容。</p>
<p>密码输入错误时将会显示浏览器默认告警弹窗，可以使用 <a href="https://sweetalert.js.org/">sweetalert</a> 来美化错误提示：</p>
<p>在主题自定义布局文件中添加如下代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next\layout_custom\custom.swig&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;unpkg.com&#x2F;sweetalert&#x2F;dist&#x2F;sweetalert.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>如果 custom.swig 文件不存在，需要手动新建并在布局页面中 body 末尾引入：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes\next\layout_layout.swig      ...</span><br><span class="line">      &#123;% include &#39;_third-party&#x2F;exturl.swig&#39; %&#125;</span><br><span class="line">      &#123;% include &#39;_third-party&#x2F;bookmark.swig&#39; %&#125;</span><br><span class="line">      &#123;% include &#39;_third-party&#x2F;copy-code.swig&#39; %&#125;</span><br><span class="line"></span><br><span class="line">+     &#123;% include &#39;_custom&#x2F;custom.swig&#39; %&#125;</span><br><span class="line">    &lt;&#x2F;body&gt;</span><br><span class="line">  &lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<p>在 node_modules 依赖库中修改 hexo-blog-encrypt 源码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">node_modules\hexo-blog-encrypt\lib\blog.encrypt.js  ...</span><br><span class="line">  &#125; catch (e) &#123;</span><br><span class="line">-   alert(decryptionError);</span><br><span class="line">+   swal(&#123;</span><br><span class="line">+     text: &quot;密码错误!&quot;,</span><br><span class="line">+     icon: &quot;error&quot;,</span><br><span class="line">+     className: &quot;password-error&quot;,</span><br><span class="line">+     timer: 1000,</span><br><span class="line">+     button: false</span><br><span class="line">+   &#125;);</span><br><span class="line">    console.log(e);</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>

<p>在自定义样式文件中添加如下代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">themes&#x2F;next&#x2F;source&#x2F;css&#x2F;_custom&#x2F;custom.styl&#x2F;&#x2F;密码错误sweetalert弹框样式修改</span><br><span class="line">.swal-overlay &#123;</span><br><span class="line">  background-color: transparent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.password-error &#123;</span><br><span class="line">  box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.15);</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>由于是在 node_module 中修改的依赖文件，一旦更新或者重装依赖都会覆盖修改，需要重新修改一遍。</p>
<h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><ul>
<li><a href="https://reuixiy.github.io/technology/computer/computer-aided-art/2017/06/09/hexo-next-optimization.html">reuixiy | 打造个性超赞博客 Hexo+NexT+GitHubPages 的超深度优化</a></li>
<li><a href="https://notes.doublemine.me/2015-10-21-%E4%B8%BANexT%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E9%98%85%E8%AF%BB%E9%87%8F%E7%BB%9F%E8%AE%A1%E5%8A%9F%E8%83%BD.html#%E9%85%8D%E7%BD%AELeanCloud">夏末 | 为 NexT 主题添加文章阅读量统计功能</a></li>
<li><a href="https://thief.one/2017/03/03/Hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/">nMask | Hexo 搭建博客教程</a></li>
<li><a href="https://leancloud.cn/docs/leanstorage_guide-js.html">LeanCloud | JavaScript SDK 安装指南</a></li>
<li><a href="https://diygod.me/2153/">DIYgod | 我藏好了哦</a></li>
<li><a href="https://github.com/mythsman/hexo-douban">mythsman/hexo-douban README.md</a></li>
<li><a href="https://asdfv1929.github.io/2018/01/21/daovoice/">asdfv1929 | Hexo NexT 主题内接入网页在线联系功能</a></li>
<li><a href="https://www.hotjar.com/tour">Hotjar Features</a></li>
<li>[Incoming Feedback by Hotjar</li>
</ul>
]]></content>
      <categories>
        <category>Hexo</category>
        <category>Configuration</category>
      </categories>
      <tags>
        <tag>博客优化</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
</search>
